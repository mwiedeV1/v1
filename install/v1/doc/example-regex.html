
	<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
	<html xmlns="http://www.w3.org/1999/xhtml">
	
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />	
		<title>V1 Script - Regular expressions</title>
		<link rel="stylesheet" type="text/css" href="css/style.css" />
	</head>
	
	<body>
	
	<div class="logo"><a href="index.html"><img src="images/v1_logo.png" alt="V1 Script"/></a></div>
	
	<div class="page_wrap">
	<h1>Example: Regular expressions</h1>
<p>Demonstrates how to work with <a href="module-regex.html">regex module</a> based on PRCE and PHP compatible functions.</p>
<pre><code><span style="color: #000000"></span><span style="color: #0000BB;">&lt;?</span><span style="color: #000000">v1<br /><br /></span><span style="color: #0000BB;">require_once&nbsp;(</span><span style="color: #DD0000">"lib/wget.inc.v1"</span><span style="color: #0000BB;">);<br /><br />function&nbsp;</span><span style="color: #000000">getStockValues&nbsp;</span><span style="color: #0000BB;">()&nbsp;<br />{<br />&nbsp;&nbsp;</span><span style="color: #000000">url&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #DD0000">"https://www.onvista.de"</span><span style="color: #0000BB;">;&nbsp;&nbsp;<br /><br />&nbsp;&nbsp;</span><span style="color: #008000">//&nbsp;Use&nbsp;WGet&nbsp;library&nbsp;to&nbsp;receive&nbsp;HTML&nbsp;website<br />&nbsp;&nbsp;</span><span style="color: #000000">website&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">wget&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">url</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">null</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">false</span><span style="color: #0000BB;">);<br />&nbsp;&nbsp;if&nbsp;(</span><span style="color: #000000">website</span><span style="color: #0000BB;">[</span><span style="color: #DD0000">"errText"</span><span style="color: #0000BB;">]!=</span><span style="color: #DD0000">""</span><span style="color: #0000BB;">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #DD0000">"Error:&nbsp;"</span><span style="color: #0000BB;">.</span><span style="color: #000000">website</span><span style="color: #0000BB;">[</span><span style="color: #DD0000">"errText"</span><span style="color: #0000BB;">];<br />&nbsp;&nbsp;}<br />&nbsp;&nbsp;else&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #008000">//&nbsp;List&nbsp;of&nbsp;PCRE&nbsp;patterns<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #000000">patternList&nbsp;</span><span style="color: #0000BB;">=&nbsp;[<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"Dow&nbsp;Jones"&nbsp;</span><span style="color: #0000BB;">=&gt;&nbsp;</span><span style="color: #DD0000">'&lt;span&nbsp;class="top-assets__price"&nbsp;data-push="15305651:last:1:1:Index"&gt;&nbsp;(.*?)&nbsp;&lt;\/span&gt;'</span><span style="color: #0000BB;">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"German&nbsp;DAX"&nbsp;</span><span style="color: #0000BB;">=&gt;&nbsp;</span><span style="color: #DD0000">'&lt;span&nbsp;class="top-assets__price"&nbsp;data-push="14207349:last:1:1:Index"&gt;&nbsp;(.*?)&nbsp;&lt;\/span&gt;'</span><span style="color: #0000BB;">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"Oil&nbsp;(WTI)"&nbsp;</span><span style="color: #0000BB;">=&gt;&nbsp;</span><span style="color: #DD0000">'&lt;span&nbsp;class="top-assets__price"&nbsp;data-push="31117979:last:1:1:Commodity"&gt;&nbsp;(.*?)&nbsp;&lt;\/span&gt;'</span><span style="color: #0000BB;">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"USDEUR"&nbsp;</span><span style="color: #0000BB;">=&gt;&nbsp;</span><span style="color: #DD0000">'&lt;span&nbsp;data-push="1390634:last:2:0:Currency"&gt;(.*?)&lt;\/span&gt;'</span><span style="color: #0000BB;">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"Gold"&nbsp;</span><span style="color: #0000BB;">=&gt;&nbsp;</span><span style="color: #DD0000">'&lt;span&nbsp;class="top-assets__price"&nbsp;data-push="31117890:last:1:1:Commodity"&gt;(.*?)&lt;\/span&gt;'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB;">];<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #000000">stockList&nbsp;</span><span style="color: #0000BB;">=&nbsp;array&nbsp;();<br />&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(</span><span style="color: #000000">patternList&nbsp;</span><span style="color: #0000BB;">as&nbsp;</span><span style="color: #000000">name&nbsp;</span><span style="color: #0000BB;">=&gt;&nbsp;</span><span style="color: #000000">pattern</span><span style="color: #0000BB;">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #000000">matches&nbsp;</span><span style="color: #0000BB;">=&nbsp;array&nbsp;();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #008000">//&nbsp;Check&nbsp;the&nbsp;pattern<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #000000">ret&nbsp;&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">preg_match_all&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">pattern</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">website</span><span style="color: #0000BB;">[</span><span style="color: #DD0000">"content"</span><span style="color: #0000BB;">],&nbsp;</span><span style="color: #000000">matches</span><span style="color: #0000BB;">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #000000">ret</span><span style="color: #0000BB;">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #008000">//&nbsp;Value&nbsp;found,&nbsp;remove&nbsp;.&nbsp;and&nbsp;replace&nbsp;,&nbsp;with&nbsp;.<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #000000">stockList</span><span style="color: #0000BB;">[</span><span style="color: #000000">name</span><span style="color: #0000BB;">]=</span><span style="color: #000000">str_replace&nbsp;</span><span style="color: #0000BB;">(array&nbsp;(</span><span style="color: #DD0000">"."</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">","</span><span style="color: #0000BB;">),&nbsp;array&nbsp;(</span><span style="color: #DD0000">""</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">"."</span><span style="color: #0000BB;">),&nbsp;</span><span style="color: #000000">matches</span><span style="color: #0000BB;">[</span><span style="color: #000000">1</span><span style="color: #0000BB;">][</span><span style="color: #000000">0</span><span style="color: #0000BB;">]);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #000000">stockList</span><span style="color: #0000BB;">[</span><span style="color: #000000">name</span><span style="color: #0000BB;">]=</span><span style="color: #DD0000">"&lt;not&nbsp;found,&nbsp;check&nbsp;pattern&gt;"</span><span style="color: #0000BB;">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #000000">stockList</span><span style="color: #0000BB;">;<br />&nbsp;&nbsp;}<br />&nbsp;&nbsp;return&nbsp;-</span><span style="color: #000000">1</span><span style="color: #0000BB;">;&nbsp;<br />}<br /><br /><br /></span><span style="color: #000000">print_r&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">getStockValues&nbsp;</span><span style="color: #0000BB;">());<br /><br /></span><span style="color: #000000">?&gt;</span></code></pre>
<p><a href="index.html">back to Home</a></p>
	</div>
	<footer>
		<p>V1 Version 0.96 - Documentation generated Tue, 05 Sep 2023 11:27</p>
	</footer>
	</body>
	</html>
	
	