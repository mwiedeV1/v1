
	<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
	<html xmlns="http://www.w3.org/1999/xhtml">
	
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />	
		<title>V1 Script - Send EMail</title>
		<link rel="stylesheet" type="text/css" href="css/style.css" />
	</head>
	
	<body>
	
	<div class="logo"><a href="index.html"><img src="images/v1_logo.png" alt="V1 Script"/></a></div>
	
	<div class="page_wrap">
	<h1>Example: Send EMail / SMTP Client</h1>
<p>Send email with attachments, optional authentication and TLS.<br>
SMTP functions are defined in <strong>lib/smtp.inc.v1</strong></p>
<pre><code><span style="color: #000000"></span><span style="color: #0000BB;">&lt;?</span><span style="color: #000000">v1<br /><br /></span><span style="color: #008000">//&nbsp;Import&nbsp;the&nbsp;SMTP&nbsp;Library<br /></span><span style="color: #0000BB;">require_once&nbsp;(</span><span style="color: #DD0000">"lib/smtp.inc.v1"</span><span style="color: #0000BB;">);<br /><br /></span><span style="color: #008000">//&nbsp;Login&nbsp;/&nbsp;Authentication<br /></span><span style="color: #000000">host&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #DD0000">"localhost"</span><span style="color: #0000BB;">;&nbsp;</span><span style="color: #008000">//&nbsp;SMTP-Server,&nbsp;if&nbsp;empty&nbsp;then&nbsp;sendmail&nbsp;on&nbsp;Linux&nbsp;will&nbsp;be&nbsp;used,&nbsp;you&nbsp;can&nbsp;set&nbsp;own&nbsp;sendmail&nbsp;path&nbsp;in&nbsp;lib/smtp.inc.v1<br /></span><span style="color: #000000">port&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">25</span><span style="color: #0000BB;">;&nbsp;</span><span style="color: #008000">//&nbsp;SMTP-Port,&nbsp;default&nbsp;=&nbsp;25<br /></span><span style="color: #000000">user&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #DD0000">""</span><span style="color: #0000BB;">;&nbsp;</span><span style="color: #008000">//&nbsp;Username,&nbsp;let&nbsp;empty&nbsp;for&nbsp;no&nbsp;authentication<br /></span><span style="color: #000000">pass&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #DD0000">""</span><span style="color: #0000BB;">;&nbsp;</span><span style="color: #008000">//&nbsp;Password<br /><br />//&nbsp;Sender,&nbsp;Recipient&nbsp;email&nbsp;addresses<br /></span><span style="color: #000000">from&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #DD0000">"from@me.xyz"</span><span style="color: #0000BB;">;&nbsp;</span><span style="color: #008000">//&nbsp;Sender,&nbsp;mostly&nbsp;same&nbsp;as&nbsp;username<br /></span><span style="color: #000000">to&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #DD0000">'to@you.xyz,&nbsp;"Nice&nbsp;Recipient"&nbsp;&lt;and@you.xyz&gt;'</span><span style="color: #0000BB;">;&nbsp;</span><span style="color: #008000">//&nbsp;Recipient(s),&nbsp;more&nbsp;recipients&nbsp;are&nbsp;separated&nbsp;by&nbsp;comma<br /></span><span style="color: #000000">reply_to&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #DD0000">""</span><span style="color: #0000BB;">;&nbsp;</span><span style="color: #008000">//&nbsp;BCC&nbsp;does&nbsp;not&nbsp;work&nbsp;on&nbsp;some&nbsp;Mailservers<br /><br />//&nbsp;Make&nbsp;sender&nbsp;to&nbsp;a&nbsp;nice&nbsp;format<br /></span><span style="color: #000000">from_name&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #DD0000">"V1&nbsp;Script"</span><span style="color: #0000BB;">;<br /></span><span style="color: #000000">from&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #DD0000">"=?UTF-8?B?"</span><span style="color: #0000BB;">.</span><span style="color: #000000">base64_encode</span><span style="color: #0000BB;">(</span><span style="color: #000000">from_name</span><span style="color: #0000BB;">).</span><span style="color: #DD0000">"?=&nbsp;&lt;"</span><span style="color: #0000BB;">.</span><span style="color: #000000">from</span><span style="color: #0000BB;">.</span><span style="color: #DD0000">"&gt;"</span><span style="color: #0000BB;">;<br /><br /></span><span style="color: #008000">//&nbsp;Subject<br /></span><span style="color: #000000">subject&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #DD0000">"Mail&nbsp;from&nbsp;V1"</span><span style="color: #0000BB;">;<br /><br /></span><span style="color: #008000">//&nbsp;Message<br /></span><span style="color: #000000">content_text&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #DD0000">"This&nbsp;is&nbsp;a&nbsp;HTML&nbsp;formatted&nbsp;mail.&nbsp;Switch&nbsp;to&nbsp;HTML&nbsp;view."</span><span style="color: #0000BB;">;<br /></span><span style="color: #000000">content_html&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #DD0000">'<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;html&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;body&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;h2&gt;V1-Script&lt;/h2&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;This&nbsp;mail&nbsp;was&nbsp;sent&nbsp;from&nbsp;'</span><span style="color: #0000BB;">.</span><span style="color: #000000">__FILE__</span><span style="color: #0000BB;">.</span><span style="color: #DD0000">'&lt;/p&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;The&nbsp;following&nbsp;image&nbsp;was&nbsp;attached&nbsp;with&nbsp;own&nbsp;Content-ID.&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;It&nbsp;is&nbsp;also&nbsp;attached&nbsp;for&nbsp;download&nbsp;as&nbsp;a&nbsp;regular&nbsp;document.&lt;/p&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;&lt;img&nbsp;alt="logo.png"&nbsp;src="cid:image001.png@01CD4999.207EFEB0"&nbsp;/&gt;&lt;/p&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/body&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;/html&gt;<br />'</span><span style="color: #0000BB;">;<br /><br /></span><span style="color: #008000">//&nbsp;Filenames&nbsp;attached<br /></span><span style="color: #000000">filenames</span><span style="color: #0000BB;">=array&nbsp;(<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #008000">//&nbsp;Attach&nbsp;a&nbsp;file&nbsp;with&nbsp;own&nbsp;visible&nbsp;filename<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB;">array&nbsp;(</span><span style="color: #DD0000">"filename"</span><span style="color: #0000BB;">=&gt;</span><span style="color: #DD0000">"doc/images/v1_logo.png"</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">"visible_filename"</span><span style="color: #0000BB;">=&gt;</span><span style="color: #DD0000">"V1&nbsp;Logo.png"</span><span style="color: #0000BB;">),<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #008000">//&nbsp;Attach&nbsp;image&nbsp;to&nbsp;reference&nbsp;it&nbsp;direct&nbsp;in&nbsp;html&nbsp;with&nbsp;own&nbsp;Content-ID<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB;">array&nbsp;(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"filename"&nbsp;</span><span style="color: #0000BB;">=&gt;&nbsp;</span><span style="color: #DD0000">"doc/images/v1_logo.png"</span><span style="color: #0000BB;">,&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"Content-Type"&nbsp;</span><span style="color: #0000BB;">=&gt;&nbsp;</span><span style="color: #DD0000">"image/png"</span><span style="color: #0000BB;">,&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"Content-ID"&nbsp;&nbsp;</span><span style="color: #0000BB;">=&gt;&nbsp;</span><span style="color: #DD0000">"image001.png@01CD4999.207EFEB0"<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB;">),<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #008000">//&nbsp;Attach&nbsp;also&nbsp;the&nbsp;current&nbsp;script&nbsp;file<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #000000">basename&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">__FILE__</span><span style="color: #0000BB;">)<br />);<br /><br /><br /></span><span style="color: #008000">//&nbsp;Note!&nbsp;Also&nbsp;the&nbsp;php&nbsp;compatible&nbsp;mail()&nbsp;function&nbsp;can&nbsp;be&nbsp;used&nbsp;here,<br />//&nbsp;but&nbsp;send_mail()&nbsp;send&nbsp;attachments&nbsp;and&nbsp;multipart&nbsp;message&nbsp;much&nbsp;more&nbsp;easier.<br /><br /></span><span style="color: #000000">ret&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">send_mail&nbsp;</span><span style="color: #0000BB;">(<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #000000">from</span><span style="color: #0000BB;">,&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #000000">to</span><span style="color: #0000BB;">,&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #000000">subject</span><span style="color: #0000BB;">,&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #000000">content_text</span><span style="color: #0000BB;">,&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #000000">content_html</span><span style="color: #0000BB;">,&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #000000">reply_to</span><span style="color: #0000BB;">,&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #000000">filenames</span><span style="color: #0000BB;">,&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #000000">user</span><span style="color: #0000BB;">,&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #000000">pass</span><span style="color: #0000BB;">,&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #000000">host</span><span style="color: #0000BB;">,&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #000000">port</span><span style="color: #0000BB;">);&nbsp;<br /><br />if&nbsp;(</span><span style="color: #000000">ret</span><span style="color: #0000BB;">===</span><span style="color: #000000">true</span><span style="color: #0000BB;">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;print&nbsp;(</span><span style="color: #DD0000">"Mail&nbsp;was&nbsp;sent."</span><span style="color: #0000BB;">);<br />}<br />else&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;print&nbsp;(</span><span style="color: #DD0000">"Mail&nbsp;error:&nbsp;"</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">ret</span><span style="color: #0000BB;">);<br />}<br /><br /></span><span style="color: #000000">?&gt;</span></code></pre>
<p><a href="index.html">back to Home</a></p>
	</div>
	<footer>
		<p>V1 Version 0.96 - Documentation generated Mon, 11 Jan 2021 10:33</p>
	</footer>
	</body>
	</html>
	
	