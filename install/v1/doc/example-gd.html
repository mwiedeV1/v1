
	<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
	<html xmlns="http://www.w3.org/1999/xhtml">
	
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />	
		<title>V1 Script - Graphics functions</title>
		<link rel="stylesheet" type="text/css" href="css/style.css" />
	</head>
	
	<body>
	
	<div class="logo"><a href="index.html"><img src="images/v1_logo.png" alt="V1 Script"/></a></div>
	
	<div class="page_wrap">
	<h1>Example: Graphics functions</h1>
<p>Demonstrates how to create and manipulate images with <a href="module-gd.html">gd module</a> based on LibGD.</p>
<p><strong>Example 1: Create red PNG image with 100x100 pixel</strong></p>
<pre><code><span style="color: #000000"></span><span style="color: #0000BB;">&lt;?</span><span style="color: #000000">v1<br /><br />dl&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #DD0000">"gd"</span><span style="color: #0000BB;">);&nbsp;</span><span style="color: #008000">//&nbsp;Load&nbsp;gd&nbsp;module<br /><br /></span><span style="color: #000000">img&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">imagecreatetruecolor&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">100</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">100</span><span style="color: #0000BB;">);<br /></span><span style="color: #000000">red&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">imagecolorallocatealpha&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">img</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">255</span><span style="color: #0000BB;">,</span><span style="color: #000000">0</span><span style="color: #0000BB;">,</span><span style="color: #000000">0</span><span style="color: #0000BB;">,</span><span style="color: #000000">0</span><span style="color: #0000BB;">);<br /></span><span style="color: #000000">imagefill&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">img</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">0</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">0</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">red</span><span style="color: #0000BB;">);<br /><br /></span><span style="color: #008000">//&nbsp;If&nbsp;filename&nbsp;is&nbsp;null&nbsp;then&nbsp;the&nbsp;image&nbsp;will&nbsp;be&nbsp;written&nbsp;to&nbsp;standard&nbsp;output.&nbsp;<br />//&nbsp;This&nbsp;is&nbsp;useful&nbsp;to&nbsp;show&nbsp;the&nbsp;image&nbsp;in&nbsp;Web&nbsp;mode.<br /></span><span style="color: #000000">imagepng</span><span style="color: #0000BB;">(</span><span style="color: #000000">img</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">"red_100x100.png"</span><span style="color: #0000BB;">);&nbsp;<br /><br /></span><span style="color: #000000">imagedestroy&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">img</span><span style="color: #0000BB;">);<br /><br /></span><span style="color: #000000">?&gt;</span></code></pre>
<p>Result:</p>
<p><img src="images/red_100x100.png" alt="Red PNG image 100x100 pixel"></p>
<p><strong>Example 2: Create transparent PNG image and draw a triangle</strong></p>
<pre><code><span style="color: #000000"></span><span style="color: #0000BB;">&lt;?</span><span style="color: #000000">v1<br /><br />dl&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #DD0000">"gd"</span><span style="color: #0000BB;">);&nbsp;</span><span style="color: #008000">//&nbsp;Load&nbsp;gd&nbsp;module<br /><br /></span><span style="color: #000000">img&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">imagecreatetruecolor&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">80</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">60</span><span style="color: #0000BB;">);<br /></span><span style="color: #000000">black&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">imagecolorallocatealpha&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">img</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">0</span><span style="color: #0000BB;">,</span><span style="color: #000000">0</span><span style="color: #0000BB;">,</span><span style="color: #000000">0</span><span style="color: #0000BB;">,</span><span style="color: #000000">0</span><span style="color: #0000BB;">);<br /></span><span style="color: #000000">imagefill&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">img</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">0</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">0</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">black</span><span style="color: #0000BB;">);<br /><br /></span><span style="color: #008000">//&nbsp;Make&nbsp;background&nbsp;color&nbsp;transparent<br /></span><span style="color: #000000">imagecolortransparent&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">img</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">black</span><span style="color: #0000BB;">);<br /><br /></span><span style="color: #008000">//&nbsp;Note:&nbsp;The&nbsp;alpha&nbsp;color&nbsp;50&nbsp;(0..127)&nbsp;defines&nbsp;how&nbsp;much&nbsp;the&nbsp;transparent&nbsp;background&nbsp;<br />//&nbsp;shines&nbsp;through&nbsp;the&nbsp;color.&nbsp;In&nbsp;this&nbsp;example&nbsp;the&nbsp;transparent&nbsp;background&nbsp;color&nbsp;is&nbsp;<br />//&nbsp;black,&nbsp;that&nbsp;means&nbsp;alpha&nbsp;&gt;&nbsp;0&nbsp;will&nbsp;make&nbsp;the&nbsp;color&nbsp;darker.<br /></span><span style="color: #000000">green&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">imagecolorallocatealpha&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">img</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">0</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">255</span><span style="color: #0000BB;">,</span><span style="color: #000000">0</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">50</span><span style="color: #0000BB;">);<br /></span><span style="color: #000000">red&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">imagecolorallocatealpha&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">img</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">255</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">0</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">0</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">50</span><span style="color: #0000BB;">);<br /></span><span style="color: #000000">pink&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">imagecolorallocatealpha&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">img</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">255</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">0</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">255</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">50</span><span style="color: #0000BB;">);<br /><br /></span><span style="color: #008000">//&nbsp;Create&nbsp;a&nbsp;style&nbsp;(brush)&nbsp;with&nbsp;3&nbsp;colors<br /></span><span style="color: #000000">imagesetstyle&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">img</span><span style="color: #0000BB;">,&nbsp;array&nbsp;(</span><span style="color: #000000">pink</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">green</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">red</span><span style="color: #0000BB;">));<br /><br /></span><span style="color: #008000">//&nbsp;Set&nbsp;thickness&nbsp;in&nbsp;pixel&nbsp;of&nbsp;drawing&nbsp;functions,&nbsp;1&nbsp;=&nbsp;default<br /></span><span style="color: #000000">imagesetthickness&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">img</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">10</span><span style="color: #0000BB;">);<br /><br /></span><span style="color: #008000">//&nbsp;Draw&nbsp;triangle<br /></span><span style="color: #000000">imageline&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">img</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">10</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">10</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">50</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">50</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">IMG_COLOR_STYLED</span><span style="color: #0000BB;">);<br /></span><span style="color: #000000">imageline&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">img</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">50</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">50</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">60</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">10</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">red</span><span style="color: #0000BB;">);<br /></span><span style="color: #000000">imageline&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">img</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">60</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">10</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">10</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">10</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">red</span><span style="color: #0000BB;">);<br /><br /></span><span style="color: #000000">imagepng</span><span style="color: #0000BB;">(</span><span style="color: #000000">img</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">"transparent_triangle.png"</span><span style="color: #0000BB;">);&nbsp;<br /><br /></span><span style="color: #000000">imagedestroy&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">img</span><span style="color: #0000BB;">);<br /><br /></span><span style="color: #000000">?&gt;</span></code></pre>
<p>Result:</p>
<p><img src="images/transparent_triangle.png" alt="Transparent triangle"></p>
<p><strong>Example 3: Draw some primitives</strong></p>
<pre><code><span style="color: #000000"></span><span style="color: #0000BB;">&lt;?</span><span style="color: #000000">v1<br /><br />dl&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #DD0000">"gd"</span><span style="color: #0000BB;">);&nbsp;</span><span style="color: #008000">//&nbsp;Load&nbsp;gd&nbsp;module<br /><br /></span><span style="color: #000000">img&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">imagecreatetruecolor&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">300</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">210</span><span style="color: #0000BB;">);<br /></span><span style="color: #000000">black&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">imagecolorallocatealpha&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">img</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">0</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">0</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">0</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">0</span><span style="color: #0000BB;">);<br /></span><span style="color: #000000">imagefill&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">img</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">0</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">0</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">black</span><span style="color: #0000BB;">);<br /><br /></span><span style="color: #000000">green&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">imagecolorallocatealpha&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">img</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">0</span><span style="color: #0000BB;">,</span><span style="color: #000000">255</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">0</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">0</span><span style="color: #0000BB;">);<br /></span><span style="color: #000000">red&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">imagecolorallocatealpha&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">img</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">255</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">0</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">0</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">0</span><span style="color: #0000BB;">);<br /></span><span style="color: #000000">yellow&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">imagecolorallocatealpha&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">img</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">255</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">255</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">0</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">0</span><span style="color: #0000BB;">);<br /><br /></span><span style="color: #008000">//&nbsp;Set&nbsp;red&nbsp;pixel&nbsp;to&nbsp;5/5<br /></span><span style="color: #000000">imagesetpixel&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">img</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">5</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">5</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">red</span><span style="color: #0000BB;">);<br /><br /></span><span style="color: #008000">//&nbsp;Draw&nbsp;green&nbsp;rectangle&nbsp;fom&nbsp;10/10&nbsp;to&nbsp;100/100<br /></span><span style="color: #000000">imagerectangle&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">img</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">10</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">10</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">100</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">100</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">green</span><span style="color: #0000BB;">);<br /><br /></span><span style="color: #008000">//&nbsp;Draw&nbsp;red&nbsp;circle&nbsp;with&nbsp;center&nbsp;120/160&nbsp;and&nbsp;radius&nbsp;50&nbsp;pixel<br /></span><span style="color: #000000">imageellipse&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">img</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">120</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">160</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">50</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">50</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">red</span><span style="color: #0000BB;">);<br /><br /></span><span style="color: #008000">//&nbsp;Draw&nbsp;red&nbsp;filled&nbsp;ellipse/oval&nbsp;with&nbsp;center&nbsp;230/170,&nbsp;width&nbsp;100,&nbsp;height&nbsp;50&nbsp;pixel<br /></span><span style="color: #000000">imagefilledellipse&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">img</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">230</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">170</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">100</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">50</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">red</span><span style="color: #0000BB;">);<br /><br /></span><span style="color: #008000">//&nbsp;Draw&nbsp;green&nbsp;filled&nbsp;arcus&nbsp;from&nbsp;0&nbsp;to&nbsp;300&nbsp;degree<br /></span><span style="color: #000000">imagefilledarc&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">img</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">30</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">160</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">50</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">50</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">0</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">300</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">green</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">4</span><span style="color: #0000BB;">);<br /><br /></span><span style="color: #008000">//&nbsp;Draw&nbsp;red&nbsp;open&nbsp;arcus&nbsp;from&nbsp;100&nbsp;to&nbsp;45&nbsp;degree<br /></span><span style="color: #000000">imagearc&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">img</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">230</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">55</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">100</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">100</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">100</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">45</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">red</span><span style="color: #0000BB;">);&nbsp;<br /><br /></span><span style="color: #008000">//&nbsp;Draw&nbsp;yellow&nbsp;filled&nbsp;polygon&nbsp;from&nbsp;position&nbsp;30/40&nbsp;to&nbsp;100/100&nbsp;to&nbsp;250/120&nbsp;<br /></span><span style="color: #000000">points&nbsp;</span><span style="color: #0000BB;">=&nbsp;array&nbsp;(</span><span style="color: #000000">30</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">40</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">100</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">100</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">250</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">120</span><span style="color: #0000BB;">);<br /></span><span style="color: #000000">imagefilledpolygon&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">img</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">points</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">count</span><span style="color: #0000BB;">(</span><span style="color: #000000">points</span><span style="color: #0000BB;">)/</span><span style="color: #000000">2</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">yellow</span><span style="color: #0000BB;">);<br /><br /></span><span style="color: #000000">imagepng</span><span style="color: #0000BB;">(</span><span style="color: #000000">img</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">"primitives.png"</span><span style="color: #0000BB;">);&nbsp;<br /><br /></span><span style="color: #000000">imagedestroy&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">img</span><span style="color: #0000BB;">);<br /><br /></span><span style="color: #000000">?&gt;</span></code></pre>
<p>Result:</p>
<p><img src="images/primitives.png" alt="Primitives"></p>
<p><strong>Example 4: Text with buildin fonts</strong></p>
<pre><code><span style="color: #000000"></span><span style="color: #0000BB;">&lt;?</span><span style="color: #000000">v1<br /><br />dl&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #DD0000">"gd"</span><span style="color: #0000BB;">);&nbsp;</span><span style="color: #008000">//&nbsp;Load&nbsp;gd&nbsp;module<br /><br /></span><span style="color: #000000">img&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">imagecreatetruecolor&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">250</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">115</span><span style="color: #0000BB;">);<br /><br /></span><span style="color: #000000">green&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">imagecolorallocatealpha&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">img</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">0</span><span style="color: #0000BB;">,</span><span style="color: #000000">255</span><span style="color: #0000BB;">,</span><span style="color: #000000">0</span><span style="color: #0000BB;">,</span><span style="color: #000000">0</span><span style="color: #0000BB;">);<br /></span><span style="color: #000000">imagefill&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">img</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">0</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">0</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">green</span><span style="color: #0000BB;">);<br /><br /></span><span style="color: #000000">black&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">imagecolorallocatealpha&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">img</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">0</span><span style="color: #0000BB;">,</span><span style="color: #000000">0</span><span style="color: #0000BB;">,</span><span style="color: #000000">0</span><span style="color: #0000BB;">,</span><span style="color: #000000">0</span><span style="color: #0000BB;">);<br /><br /></span><span style="color: #008000">//&nbsp;LibGD&nbsp;has&nbsp;four&nbsp;buildin&nbsp;fonts&nbsp;with&nbsp;fixed&nbsp;char&nbsp;size<br /></span><span style="color: #000000">imagestring&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">img</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">1</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">10</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">10</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">utf8_decode&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #DD0000">"Tiny,&nbsp;char&nbsp;size&nbsp;"</span><span style="color: #0000BB;">.</span><span style="color: #000000">imagefontwidth</span><span style="color: #0000BB;">(</span><span style="color: #000000">1</span><span style="color: #0000BB;">).</span><span style="color: #DD0000">"x"</span><span style="color: #0000BB;">.</span><span style="color: #000000">imagefontheight</span><span style="color: #0000BB;">(</span><span style="color: #000000">1</span><span style="color: #0000BB;">)),&nbsp;</span><span style="color: #000000">black</span><span style="color: #0000BB;">);<br /></span><span style="color: #000000">imagestring&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">img</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">2</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">10</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">25</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">utf8_decode&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #DD0000">"Small,&nbsp;char&nbsp;size&nbsp;"</span><span style="color: #0000BB;">.</span><span style="color: #000000">imagefontwidth</span><span style="color: #0000BB;">(</span><span style="color: #000000">2</span><span style="color: #0000BB;">).</span><span style="color: #DD0000">"x"</span><span style="color: #0000BB;">.</span><span style="color: #000000">imagefontheight</span><span style="color: #0000BB;">(</span><span style="color: #000000">2</span><span style="color: #0000BB;">)),&nbsp;</span><span style="color: #000000">black</span><span style="color: #0000BB;">);<br /></span><span style="color: #000000">imagestring&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">img</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">3</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">10</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">45</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">utf8_decode&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #DD0000">"Bold,&nbsp;char&nbsp;size&nbsp;"</span><span style="color: #0000BB;">.</span><span style="color: #000000">imagefontwidth</span><span style="color: #0000BB;">(</span><span style="color: #000000">3</span><span style="color: #0000BB;">).</span><span style="color: #DD0000">"x"</span><span style="color: #0000BB;">.</span><span style="color: #000000">imagefontheight</span><span style="color: #0000BB;">(</span><span style="color: #000000">3</span><span style="color: #0000BB;">)),&nbsp;</span><span style="color: #000000">black</span><span style="color: #0000BB;">);<br /></span><span style="color: #000000">imagestring&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">img</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">4</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">10</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">65</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">utf8_decode&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #DD0000">"Big,&nbsp;char&nbsp;size&nbsp;"</span><span style="color: #0000BB;">.</span><span style="color: #000000">imagefontwidth</span><span style="color: #0000BB;">(</span><span style="color: #000000">4</span><span style="color: #0000BB;">).</span><span style="color: #DD0000">"x"</span><span style="color: #0000BB;">.</span><span style="color: #000000">imagefontheight</span><span style="color: #0000BB;">(</span><span style="color: #000000">4</span><span style="color: #0000BB;">)),&nbsp;</span><span style="color: #000000">black</span><span style="color: #0000BB;">);<br /></span><span style="color: #000000">imagestring&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">img</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">5</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">10</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">87</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">utf8_decode&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #DD0000">"Bold,&nbsp;char&nbsp;size&nbsp;"</span><span style="color: #0000BB;">.</span><span style="color: #000000">imagefontwidth</span><span style="color: #0000BB;">(</span><span style="color: #000000">5</span><span style="color: #0000BB;">).</span><span style="color: #DD0000">"x"</span><span style="color: #0000BB;">.</span><span style="color: #000000">imagefontheight</span><span style="color: #0000BB;">(</span><span style="color: #000000">5</span><span style="color: #0000BB;">)),&nbsp;</span><span style="color: #000000">black</span><span style="color: #0000BB;">);<br /><br /></span><span style="color: #008000">//&nbsp;Draw&nbsp;text&nbsp;from&nbsp;bottom&nbsp;to&nbsp;top<br /></span><span style="color: #000000">imagestringup&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">img</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">4</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">220</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">90</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">utf8_decode&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #DD0000">"My&nbsp;Text&nbsp;up"</span><span style="color: #0000BB;">),&nbsp;</span><span style="color: #000000">black</span><span style="color: #0000BB;">);<br /><br /></span><span style="color: #000000">imagepng</span><span style="color: #0000BB;">(</span><span style="color: #000000">img</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">"imagetext.png"</span><span style="color: #0000BB;">);&nbsp;<br /><br /></span><span style="color: #000000">imagedestroy&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">img</span><span style="color: #0000BB;">);<br /><br /></span><span style="color: #000000">?&gt;</span></code></pre>
<p>Result:</p>
<p><img src="images/imagetext.png" alt="Image text"></p>
<p><strong>Example 5: Text with true type front</strong></p>
<pre><code><span style="color: #000000"></span><span style="color: #0000BB;">&lt;?</span><span style="color: #000000">v1<br /><br />dl&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #DD0000">"gd"</span><span style="color: #0000BB;">);&nbsp;</span><span style="color: #008000">//&nbsp;Load&nbsp;gd&nbsp;module<br /><br /></span><span style="color: #000000">img&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">imagecreatetruecolor&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">290</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">190</span><span style="color: #0000BB;">);<br /><br /></span><span style="color: #000000">green&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">imagecolorallocatealpha&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">img</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">0</span><span style="color: #0000BB;">,</span><span style="color: #000000">255</span><span style="color: #0000BB;">,</span><span style="color: #000000">0</span><span style="color: #0000BB;">,</span><span style="color: #000000">0</span><span style="color: #0000BB;">);<br /></span><span style="color: #000000">imagefill&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">img</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">0</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">0</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">green</span><span style="color: #0000BB;">);<br /><br /></span><span style="color: #000000">black&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">imagecolorallocatealpha&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">img</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">0</span><span style="color: #0000BB;">,</span><span style="color: #000000">0</span><span style="color: #0000BB;">,</span><span style="color: #000000">0</span><span style="color: #0000BB;">,</span><span style="color: #000000">0</span><span style="color: #0000BB;">);<br /><br /></span><span style="color: #000000">angle&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">0.5</span><span style="color: #0000BB;">;&nbsp;</span><span style="color: #008000">//&nbsp;Radiant<br /></span><span style="color: #000000">ttfFilename&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #DD0000">"Arial.ttf"</span><span style="color: #0000BB;">;<br /></span><span style="color: #000000">fontSize&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">15</span><span style="color: #0000BB;">;<br /></span><span style="color: #000000">x&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">30</span><span style="color: #0000BB;">;<br /></span><span style="color: #000000">y&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">150</span><span style="color: #0000BB;">;<br /></span><span style="color: #000000">imagettftext&nbsp;&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">img</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">fontSize</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">angle</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">x</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">y</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">black</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">ttfFilename</span><span style="color: #0000BB;">,&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #000000">utf8_decode&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #DD0000">"This&nbsp;true&nbsp;type&nbsp;text&nbsp;is&nbsp;rotated\r\nand&nbsp;can&nbsp;have&nbsp;multiple&nbsp;lines"</span><span style="color: #0000BB;">));<br /><br /></span><span style="color: #000000">imagepng</span><span style="color: #0000BB;">(</span><span style="color: #000000">img</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">"imagetext_truetype.png"</span><span style="color: #0000BB;">);&nbsp;<br /><br /></span><span style="color: #000000">imagedestroy&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">img</span><span style="color: #0000BB;">);<br /><br /></span><span style="color: #000000">?&gt;</span></code></pre>
<p>Result:</p>
<p><img src="images/imagetext_truetype.png" alt="Image true type font"></p>
<p><strong>Example 6: Load and rotate image</strong></p>
<pre><code><span style="color: #000000"></span><span style="color: #0000BB;">&lt;?</span><span style="color: #000000">v1<br /><br />dl&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #DD0000">"gd"</span><span style="color: #0000BB;">);&nbsp;</span><span style="color: #008000">//&nbsp;Load&nbsp;gd&nbsp;module<br /><br />//&nbsp;Load&nbsp;image&nbsp;from&nbsp;file<br /></span><span style="color: #000000">img&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">imagecreatefromfile&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #DD0000">"v1_logo.png"</span><span style="color: #0000BB;">);<br /><br /></span><span style="color: #000000">red&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">imagecolorallocatealpha&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">img</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">255</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">0</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">0</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">0</span><span style="color: #0000BB;">);<br /><br /></span><span style="color: #008000">//&nbsp;Rotate&nbsp;22.5&nbsp;degrees&nbsp;to&nbsp;right&nbsp;with&nbsp;red&nbsp;background<br /></span><span style="color: #000000">img2&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">imagerotate&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">img</span><span style="color: #0000BB;">,&nbsp;-</span><span style="color: #000000">25.5</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">red</span><span style="color: #0000BB;">);<br /><br /></span><span style="color: #000000">imagefile&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">img</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">"image_rotate.png"</span><span style="color: #0000BB;">);&nbsp;<br /><br /></span><span style="color: #000000">?&gt;</span></code></pre>
<p>Result:</p>
<p><img src="images/image_rotate.png" alt="Rotated image"></p>
<p><strong>Example 7: Effects on images</strong></p>
<pre><code><span style="color: #000000"></span><span style="color: #0000BB;">&lt;?</span><span style="color: #000000">v1<br /><br />dl&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #DD0000">"gd"</span><span style="color: #0000BB;">);&nbsp;</span><span style="color: #008000">//&nbsp;Load&nbsp;gd&nbsp;module<br /><br />//&nbsp;Load&nbsp;image&nbsp;from&nbsp;file<br /></span><span style="color: #000000">img&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">imagecreatefromfile&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #DD0000">"v1_logo.png"</span><span style="color: #0000BB;">);<br /><br /></span><span style="color: #008000">//&nbsp;Set&nbsp;brightsness&nbsp;to&nbsp;darker<br /></span><span style="color: #000000">imagefilter&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">img</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">IMG_FILTER_BRIGHTNESS</span><span style="color: #0000BB;">,&nbsp;-</span><span style="color: #000000">100</span><span style="color: #0000BB;">);<br /><br /></span><span style="color: #000000">imagefile&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">img</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">"image_brightness.png"</span><span style="color: #0000BB;">);&nbsp;<br /><br /></span><span style="color: #000000">?&gt;</span></code></pre>
<p>Result:</p>
<p><img src="images/image_brightness.png" alt="Darken image"></p>
<p>More effects on images see PHP compatible function: <a href="https://www.php.net/manual/en/function.imagefilter.php" target="_blank">image_filter()</a></p>
<p><strong>Example 8: Crop images</strong></p>
<pre><code><span style="color: #000000"></span><span style="color: #0000BB;">&lt;?</span><span style="color: #000000">v1<br /><br />dl&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #DD0000">"gd"</span><span style="color: #0000BB;">);&nbsp;</span><span style="color: #008000">//&nbsp;Load&nbsp;gd&nbsp;module<br /><br />//&nbsp;Load&nbsp;image&nbsp;from&nbsp;file<br /></span><span style="color: #000000">img&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">imagecreatefromfile&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #DD0000">"v1_logo.png"</span><span style="color: #0000BB;">);<br /><br /></span><span style="color: #008000">//&nbsp;Crop&nbsp;image&nbsp;area<br /></span><span style="color: #000000">img2&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">imagecrop&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">img</span><span style="color: #0000BB;">,&nbsp;array&nbsp;(</span><span style="color: #DD0000">"x"</span><span style="color: #0000BB;">=&gt;</span><span style="color: #000000">15</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">"y"</span><span style="color: #0000BB;">=&gt;</span><span style="color: #000000">20</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">"width"</span><span style="color: #0000BB;">=&gt;</span><span style="color: #000000">80</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">"height"</span><span style="color: #0000BB;">=&gt;</span><span style="color: #000000">75</span><span style="color: #0000BB;">));<br /><br /></span><span style="color: #000000">imagefile&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">img2</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">"image_crop.png"</span><span style="color: #0000BB;">);&nbsp;<br /><br /></span><span style="color: #000000">?&gt;</span></code></pre>
<p>Result:</p>
<p><img src="images/image_crop.png" alt="Cropped image"></p>
<p><strong>Example 9: Count pixels with specific color</strong></p>
<pre><code><span style="color: #000000"></span><span style="color: #0000BB;">&lt;?</span><span style="color: #000000">v1<br /><br />dl&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #DD0000">"gd"</span><span style="color: #0000BB;">);&nbsp;</span><span style="color: #008000">//&nbsp;Load&nbsp;gd&nbsp;module<br /><br />//&nbsp;Load&nbsp;image&nbsp;from&nbsp;file<br /></span><span style="color: #000000">img&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">imagecreatefromfile&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #DD0000">"v1_logo.png"</span><span style="color: #0000BB;">);<br /><br /></span><span style="color: #008000">//&nbsp;Get&nbsp;image&nbsp;dimensions<br /></span><span style="color: #000000">w&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">imagesx&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">img</span><span style="color: #0000BB;">);<br /></span><span style="color: #000000">h&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">imagesy&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">img</span><span style="color: #0000BB;">);<br /><br /></span><span style="color: #000000">blueCnt&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">0</span><span style="color: #0000BB;">;<br />for&nbsp;(</span><span style="color: #000000">x</span><span style="color: #0000BB;">=</span><span style="color: #000000">0</span><span style="color: #0000BB;">;</span><span style="color: #000000">x</span><span style="color: #0000BB;">&lt;</span><span style="color: #000000">w</span><span style="color: #0000BB;">;</span><span style="color: #000000">x</span><span style="color: #0000BB;">++)&nbsp;{<br />&nbsp;&nbsp;for&nbsp;(</span><span style="color: #000000">y</span><span style="color: #0000BB;">=</span><span style="color: #000000">0</span><span style="color: #0000BB;">;</span><span style="color: #000000">y</span><span style="color: #0000BB;">&lt;</span><span style="color: #000000">h</span><span style="color: #0000BB;">;</span><span style="color: #000000">y</span><span style="color: #0000BB;">++)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #008000">//&nbsp;Get&nbsp;pixel<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #000000">p&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">imagegetpixel&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">img</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">x</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">y</span><span style="color: #0000BB;">);&nbsp;&nbsp;&nbsp;<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #000000">p</span><span style="color: #0000BB;">==</span><span style="color: #000000">0x0000FF</span><span style="color: #0000BB;">)&nbsp;</span><span style="color: #008000">//&nbsp;Blue<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #000000">blueCnt</span><span style="color: #0000BB;">++;&nbsp;&nbsp;<br />&nbsp;&nbsp;}<br />}<br /><br />print&nbsp;(</span><span style="color: #000000">blueCnt</span><span style="color: #0000BB;">.</span><span style="color: #DD0000">"&nbsp;blue&nbsp;pixels"</span><span style="color: #0000BB;">);<br /></span><span style="color: #000000">?&gt;</span></code></pre>
<p>Result: 258 blue pixels</p>
<p><strong>Example 10: Video camera example (only for Windows)</strong></p>
<pre><code><span style="color: #000000"></span><span style="color: #0000BB;">&lt;?</span><span style="color: #000000">v1<br /><br />dl&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #DD0000">"gd"</span><span style="color: #0000BB;">);&nbsp;</span><span style="color: #008000">//&nbsp;Load&nbsp;gd&nbsp;module<br /><br />//&nbsp;Get&nbsp;a&nbsp;list&nbsp;with&nbsp;all&nbsp;video&nbsp;drivers<br /></span><span style="color: #000000">drivers&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">videogetalldrivers&nbsp;</span><span style="color: #0000BB;">();<br /><br /></span><span style="color: #000000">print_r&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">drivers</span><span style="color: #0000BB;">);&nbsp;</span><span style="color: #008000">//&nbsp;Dump&nbsp;list<br /><br /></span><span style="color: #0000BB;">foreach&nbsp;(</span><span style="color: #000000">drivers&nbsp;</span><span style="color: #0000BB;">as&nbsp;</span><span style="color: #000000">i&nbsp;</span><span style="color: #0000BB;">=&gt;&nbsp;</span><span style="color: #000000">name</span><span style="color: #0000BB;">)&nbsp;<br />{<br />&nbsp;&nbsp;</span><span style="color: #008000">//&nbsp;Create&nbsp;video&nbsp;for&nbsp;driver&nbsp;index<br />&nbsp;&nbsp;</span><span style="color: #000000">video&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">videocreate&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">i</span><span style="color: #0000BB;">);&nbsp;&nbsp;&nbsp;&nbsp;<br /><br />&nbsp;&nbsp;</span><span style="color: #008000">//&nbsp;Set&nbsp;own&nbsp;video&nbsp;format<br />&nbsp;&nbsp;</span><span style="color: #0000BB;">if&nbsp;(!</span><span style="color: #000000">videosetformat&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">video</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">640</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">480</span><span style="color: #0000BB;">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;print&nbsp;(</span><span style="color: #DD0000">"Cannot&nbsp;set&nbsp;own&nbsp;video&nbsp;format"</span><span style="color: #0000BB;">);&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #000000">print_r&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">videogeterror&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">video</span><span style="color: #0000BB;">));<br />&nbsp;&nbsp;&nbsp;&nbsp;break;<br />&nbsp;&nbsp;}<br /><br />&nbsp;&nbsp;</span><span style="color: #008000">//&nbsp;Get&nbsp;properties<br />&nbsp;&nbsp;</span><span style="color: #000000">props&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">videogetprops&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">video</span><span style="color: #0000BB;">);<br />&nbsp;&nbsp;if&nbsp;(!</span><span style="color: #000000">is_array&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">props</span><span style="color: #0000BB;">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;print&nbsp;(</span><span style="color: #DD0000">"Cannot&nbsp;get&nbsp;video&nbsp;properties"</span><span style="color: #0000BB;">);<br />&nbsp;&nbsp;&nbsp;&nbsp;break;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;}<br /><br />&nbsp;&nbsp;</span><span style="color: #008000">//&nbsp;Wait&nbsp;some&nbsp;time&nbsp;for&nbsp;intialization<br />&nbsp;&nbsp;</span><span style="color: #000000">sleep&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">3000</span><span style="color: #0000BB;">);<br /><br />&nbsp;&nbsp;</span><span style="color: #008000">//&nbsp;Save&nbsp;a&nbsp;BMP&nbsp;image<br />&nbsp;&nbsp;</span><span style="color: #000000">videocapturebmp&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">video</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">"frame.bmp"</span><span style="color: #0000BB;">);&nbsp;&nbsp;<br /><br />&nbsp;&nbsp;</span><span style="color: #008000">//&nbsp;Initialize&nbsp;own&nbsp;capture&nbsp;buffer&nbsp;to&nbsp;save&nbsp;a&nbsp;raw&nbsp;image&nbsp;frame<br />&nbsp;&nbsp;</span><span style="color: #000000">captureBuf&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #DD0000">""</span><span style="color: #0000BB;">;<br />&nbsp;&nbsp;</span><span style="color: #000000">resize&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">captureBuf</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">props</span><span style="color: #0000BB;">[</span><span style="color: #DD0000">"size_image"</span><span style="color: #0000BB;">]);<br /><br />&nbsp;&nbsp;</span><span style="color: #000000">videosetcapturebuffer&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">video</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">memref&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">captureBuf</span><span style="color: #0000BB;">),&nbsp;</span><span style="color: #000000">false</span><span style="color: #0000BB;">);&nbsp;</span><span style="color: #008000">//&nbsp;false&nbsp;=&nbsp;no&nbsp;auto&nbsp;conversion&nbsp;to&nbsp;RGB32,&nbsp;we&nbsp;use&nbsp;the&nbsp;raw&nbsp;camera&nbsp;data.<br /><br />&nbsp;&nbsp;</span><span style="color: #0000BB;">if&nbsp;(</span><span style="color: #000000">videograbframe&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">video</span><span style="color: #0000BB;">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;print&nbsp;(</span><span style="color: #DD0000">"Raw&nbsp;frame&nbsp;with&nbsp;"</span><span style="color: #0000BB;">.</span><span style="color: #000000">props</span><span style="color: #0000BB;">[</span><span style="color: #DD0000">"size_image"</span><span style="color: #0000BB;">].</span><span style="color: #DD0000">"&nbsp;bytes&nbsp;grabbed"</span><span style="color: #0000BB;">);&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #008000">//&nbsp;Save&nbsp;the&nbsp;frame<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #000000">fh&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">fopen&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #DD0000">"frame_raw.dat"</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">"w+"</span><span style="color: #0000BB;">);<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #000000">fwrite&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">fh</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">captureBuf</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">props</span><span style="color: #0000BB;">[</span><span style="color: #DD0000">"size_image"</span><span style="color: #0000BB;">]);<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #000000">fclose&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">fh</span><span style="color: #0000BB;">);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;}<br />&nbsp;&nbsp;else&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;print&nbsp;(</span><span style="color: #DD0000">"videograbframe()&nbsp;failed"</span><span style="color: #0000BB;">);<br />&nbsp;&nbsp;}<br /><br />&nbsp;&nbsp;</span><span style="color: #008000">//&nbsp;Initialize&nbsp;capture&nbsp;buffer&nbsp;to&nbsp;save&nbsp;a&nbsp;RGB32&nbsp;frame<br />&nbsp;&nbsp;</span><span style="color: #000000">captureBuf&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #DD0000">""</span><span style="color: #0000BB;">;<br />&nbsp;&nbsp;</span><span style="color: #000000">resize&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">captureBuf</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">props</span><span style="color: #0000BB;">[</span><span style="color: #DD0000">"width"</span><span style="color: #0000BB;">]*</span><span style="color: #000000">props</span><span style="color: #0000BB;">[</span><span style="color: #DD0000">"height"</span><span style="color: #0000BB;">]*</span><span style="color: #000000">4</span><span style="color: #0000BB;">);<br /><br />&nbsp;&nbsp;</span><span style="color: #000000">videosetcapturebuffer&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">video</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">memref&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">captureBuf</span><span style="color: #0000BB;">),&nbsp;</span><span style="color: #000000">true</span><span style="color: #0000BB;">);&nbsp;</span><span style="color: #008000">//&nbsp;true&nbsp;=&nbsp;auto&nbsp;conversion&nbsp;to&nbsp;RGB32,&nbsp;Note:&nbsp;Only&nbsp;RGB24&nbsp;and&nbsp;YUY2&nbsp;are&nbsp;converted&nbsp;automatically!<br /><br />&nbsp;&nbsp;</span><span style="color: #0000BB;">if&nbsp;(</span><span style="color: #000000">videograbframe&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">video</span><span style="color: #0000BB;">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;print&nbsp;(</span><span style="color: #DD0000">"RGB32&nbsp;frame&nbsp;with&nbsp;"</span><span style="color: #0000BB;">.</span><span style="color: #000000">strlen&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">captureBuf</span><span style="color: #0000BB;">).</span><span style="color: #DD0000">"&nbsp;bytes&nbsp;grabbed"</span><span style="color: #0000BB;">);&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #008000">//&nbsp;Save&nbsp;the&nbsp;frame<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #000000">fh&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">fopen&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #DD0000">"frame_rgb32.dat"</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">"w+"</span><span style="color: #0000BB;">);<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #000000">fwrite&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">fh</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">captureBuf</span><span style="color: #0000BB;">);<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #000000">fclose&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">fh</span><span style="color: #0000BB;">);&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;}<br />&nbsp;&nbsp;else&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;print&nbsp;(</span><span style="color: #DD0000">"videograbframe()&nbsp;failed"</span><span style="color: #0000BB;">);<br />&nbsp;&nbsp;}<br /><br />&nbsp;&nbsp;</span><span style="color: #008000">//&nbsp;Attach&nbsp;the&nbsp;RGB32&nbsp;frame&nbsp;to&nbsp;new&nbsp;image&nbsp;object&nbsp;and&nbsp;save&nbsp;it&nbsp;as&nbsp;WebP&nbsp;format<br />&nbsp;&nbsp;</span><span style="color: #000000">img&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">imagetruecolorattachbuffer&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">memref&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">captureBuf</span><span style="color: #0000BB;">),&nbsp;</span><span style="color: #000000">props</span><span style="color: #0000BB;">[</span><span style="color: #DD0000">"width"</span><span style="color: #0000BB;">],&nbsp;</span><span style="color: #000000">props</span><span style="color: #0000BB;">[</span><span style="color: #DD0000">"height"</span><span style="color: #0000BB;">],&nbsp;-</span><span style="color: #000000">props</span><span style="color: #0000BB;">[</span><span style="color: #DD0000">"width"</span><span style="color: #0000BB;">]);&nbsp;</span><span style="color: #008000">//&nbsp;-props["width"]&nbsp;means&nbsp;that&nbsp;the&nbsp;image&nbsp;data&nbsp;starts&nbsp;at&nbsp;top/left&nbsp;position&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;</span><span style="color: #0000BB;">if&nbsp;(</span><span style="color: #000000">img</span><span style="color: #0000BB;">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #000000">imagefile&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">img</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">"frame.webp"</span><span style="color: #0000BB;">))<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print&nbsp;(</span><span style="color: #DD0000">"frame.webp&nbsp;saved"</span><span style="color: #0000BB;">);<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #000000">imagedestroy&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">img</span><span style="color: #0000BB;">);<br />&nbsp;&nbsp;}<br />&nbsp;&nbsp;else&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #000000">printf&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #DD0000">"imagetruecolorattachbuffer&nbsp;()&nbsp;failed"</span><span style="color: #0000BB;">);<br />&nbsp;&nbsp;}<br /><br />&nbsp;&nbsp;</span><span style="color: #008000">//&nbsp;Dont&nbsp;try&nbsp;the&nbsp;other&nbsp;drivers<br />&nbsp;&nbsp;</span><span style="color: #0000BB;">break;<br />}<br /><br /></span><span style="color: #000000">?&gt;</span></code></pre>
<p><a href="index.html">back to Home</a></p>
	</div>
	<footer>
		<p>V1 Version 0.96 - Documentation generated Tue, 12 Sep 2023 11:20</p>
	</footer>
	</body>
	</html>
	
	