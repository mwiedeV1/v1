
	<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
	<html xmlns="http://www.w3.org/1999/xhtml">
	
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />	
		<title>V1 Script - XML2</title>
		<link rel="stylesheet" type="text/css" href="css/style.css" />
	</head>
	
	<body>
	
	<div class="logo"><a href="index.html"><img src="images/v1_logo.png" alt="V1 Script"/></a></div>
	
	<div class="page_wrap">
	<h1>Example: Work with XML documents</h1>
<p>Demonstrates how to work with libXML2 library.<br>
libXML2 functions are defined in <strong>lib/xml2.inc.v1</strong></p>
<p>Note: You have to install libXML2 libraries.
On Windows copy the 32-Bit DLL's from <a href="https://v1-script.net/download/libXML2Iconv-WIN32.zip" target="_blank">HERE</a> into the home directory of V1 where v1.exe is located.</p>
<p>Read also libXML2 documentation: <a href="http://xmlsoft.org/html/" target="_blank">http://xmlsoft.org/html/</a></p>
<pre><code><span style="color: #000000"></span><span style="color: #0000BB;">&lt;?</span><span style="color: #000000">v1<br /></span><span style="color: #0000BB;">require_once&nbsp;(</span><span style="color: #DD0000">"lib/xml2.inc.v1"</span><span style="color: #0000BB;">);<br /><br /></span><span style="color: #008000">//&nbsp;Parse&nbsp;XML&nbsp;file&nbsp;as&nbsp;array&nbsp;and&nbsp;dump&nbsp;it<br /></span><span style="color: #000000">xmlTree&nbsp;</span><span style="color: #0000BB;">=&nbsp;array&nbsp;();<br /></span><span style="color: #000000">parseXMLFile&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #DD0000">"test.xml"</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">xmlTree</span><span style="color: #0000BB;">);<br /></span><span style="color: #000000">print_r&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">xmlTree</span><span style="color: #0000BB;">);<br /><br /></span><span style="color: #008000">//&nbsp;Parse&nbsp;XML&nbsp;string&nbsp;as&nbsp;array&nbsp;and&nbsp;dump&nbsp;it<br /></span><span style="color: #000000">xmlStr&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #DD0000">'<br />&lt;?xml&nbsp;version="1.0"&nbsp;encoding="ISO-8859-1"?&gt;<br />&lt;EXAMPLE&nbsp;version="1.0"&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;!--This&nbsp;is&nbsp;a&nbsp;comment.--&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;HEADER&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;X_ORDER_ID&nbsp;type="1"&gt;0000053535&lt;/X_ORDER_ID&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;CUSTOMER_ID&gt;00100&lt;/CUSTOMER_ID&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;/HEADER&gt;<br />&lt;/EXAMPLE&gt;'</span><span style="color: #0000BB;">;<br /><br /></span><span style="color: #000000">xmlTree&nbsp;</span><span style="color: #0000BB;">=&nbsp;array&nbsp;();<br /></span><span style="color: #000000">parseXMLString&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">xmlStr</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">xmlTree</span><span style="color: #0000BB;">);<br /></span><span style="color: #000000">print_r&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">xmlTree</span><span style="color: #0000BB;">);<br /><br /></span><span style="color: #008000">//&nbsp;Write&nbsp;XML<br /></span><span style="color: #0000BB;">const&nbsp;</span><span style="color: #000000">MY_ENCODING&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #DD0000">"ISO-8859-1"</span><span style="color: #0000BB;">;<br /><br /></span><span style="color: #000000">doc&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">null</span><span style="color: #0000BB;">;<br /></span><span style="color: #000000">buf&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">xmlBufferCreate&nbsp;</span><span style="color: #0000BB;">();<br /></span><span style="color: #000000">writer&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">xmlNewTextWriterMemory&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">buf</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">0</span><span style="color: #0000BB;">);<br />if&nbsp;(!</span><span style="color: #000000">writer</span><span style="color: #0000BB;">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;print&nbsp;(</span><span style="color: #DD0000">"xmlNewTextWriterMemory&nbsp;failed."</span><span style="color: #0000BB;">);<br />&nbsp;&nbsp;&nbsp;&nbsp;exit&nbsp;(</span><span style="color: #000000">1</span><span style="color: #0000BB;">);<br />}<br /><br /></span><span style="color: #000000">xmlTextWriterStartDocument&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">writer</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">null</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">MY_ENCODING</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">null</span><span style="color: #0000BB;">);<br /><br /></span><span style="color: #000000">xmlTextWriterWriteAttribute&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">writer</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">"version"</span><span style="color: #0000BB;">,&nbsp;&nbsp;</span><span style="color: #DD0000">"1.0"</span><span style="color: #0000BB;">);<br /></span><span style="color: #000000">xmlTextWriterStartElement&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">writer</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">"EXAMPLE"</span><span style="color: #0000BB;">);<br /></span><span style="color: #000000">xmlTextWriterWriteComment&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">writer</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">"This&nbsp;is&nbsp;a&nbsp;comment."</span><span style="color: #0000BB;">);<br /></span><span style="color: #000000">xmlTextWriterStartElement&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">writer</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">"HEADER"</span><span style="color: #0000BB;">);<br /></span><span style="color: #000000">xmlTextWriterWriteElement&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">writer</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">"X_ORDER_ID"</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">sprintf&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #DD0000">"%010d"</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">53535</span><span style="color: #0000BB;">));<br /></span><span style="color: #000000">xmlTextWriterWriteElement&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">writer</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">"CUSTOMER_ID"</span><span style="color: #0000BB;">,&nbsp;&nbsp;</span><span style="color: #DD0000">"00100"</span><span style="color: #0000BB;">);<br /></span><span style="color: #000000">xmlTextWriterEndElement&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">writer</span><span style="color: #0000BB;">);&nbsp;</span><span style="color: #008000">//&nbsp;Close&nbsp;&lt;HEADER&gt;<br /></span><span style="color: #000000">xmlTextWriterEndElement&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">writer</span><span style="color: #0000BB;">);&nbsp;</span><span style="color: #008000">//&nbsp;Close&nbsp;&lt;EXAMPLE&gt;<br /><br /></span><span style="color: #000000">xmlTextWriterEndDocument&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">writer</span><span style="color: #0000BB;">);<br /></span><span style="color: #000000">xmlFreeTextWriter&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">writer</span><span style="color: #0000BB;">);<br /><br /></span><span style="color: #008000">//&nbsp;Save&nbsp;XML&nbsp;file<br /></span><span style="color: #0000BB;">if&nbsp;(</span><span style="color: #000000">buf</span><span style="color: #0000BB;">)&nbsp;{<br />&nbsp;&nbsp;</span><span style="color: #000000">str&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">xmlBufferGetString&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">buf</span><span style="color: #0000BB;">);<br />&nbsp;&nbsp;</span><span style="color: #000000">fwrite&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">fopen&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #DD0000">"test.xml"</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">"w+"</span><span style="color: #0000BB;">),&nbsp;</span><span style="color: #000000">str</span><span style="color: #0000BB;">);<br />&nbsp;&nbsp;</span><span style="color: #000000">xmlBufferFree&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">buf</span><span style="color: #0000BB;">);<br />}<br /><br /></span><span style="color: #000000">?&gt;</span></code></pre>
<p><a href="index.html">back to Home</a></p>
	</div>
	<footer>
		<p>V1 Version 0.96 - Documentation generated Sun, 04 Jun 2023 12:38</p>
	</footer>
	</body>
	</html>
	
	