
	<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
	<html xmlns="http://www.w3.org/1999/xhtml">
	
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />	
		<title>V1 Script - Input and Files</title>
		<link rel="stylesheet" type="text/css" href="css/style.css" />
	</head>
	
	<body>
	
	<div class="logo"><a href="index.html"><img src="images/v1_logo.png" alt="V1 Script"/></a></div>
	
	<div class="page_wrap">
	<h1>Example: Working with Input and Files</h1>
<p>The follwing <a href="system-functions.html">system functions</a> and  <a href="file-functions.html">file functions</a> can be used to work with the standard input and files.</p>
<pre><code><span style="color: #000000"></span><span style="color: #0000BB;">&lt;?</span><span style="color: #000000">v1<br /><br /></span><span style="color: #008000">//&nbsp;Read&nbsp;single&nbsp;character&nbsp;from&nbsp;input<br /></span><span style="color: #000000">c&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">getch&nbsp;</span><span style="color: #0000BB;">();<br />print&nbsp;(</span><span style="color: #000000">c</span><span style="color: #0000BB;">);<br /><br /></span><span style="color: #008000">//&nbsp;Read&nbsp;single&nbsp;character&nbsp;from&nbsp;input&nbsp;as&nbsp;keyboard/ascii&nbsp;number<br /></span><span style="color: #000000">c&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">getch&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">true</span><span style="color: #0000BB;">);<br />print&nbsp;(</span><span style="color: #000000">c</span><span style="color: #0000BB;">);<br /><br /></span><span style="color: #008000">//&nbsp;Read&nbsp;line&nbsp;from&nbsp;input&nbsp;with&nbsp;text&nbsp;message<br /></span><span style="color: #000000">result&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">input&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #DD0000">"Type&nbsp;in&nbsp;something:&nbsp;"</span><span style="color: #0000BB;">);<br />print&nbsp;(</span><span style="color: #DD0000">"You&nbsp;typed&nbsp;in:&nbsp;"</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">result</span><span style="color: #0000BB;">);<br /><br /></span><span style="color: #008000">//&nbsp;If&nbsp;console&nbsp;is&nbsp;off,&nbsp;keyboard&nbsp;input&nbsp;will&nbsp;not&nbsp;be&nbsp;shown<br /></span><span style="color: #000000">console_echo&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">0</span><span style="color: #0000BB;">);&nbsp;<br /></span><span style="color: #000000">result&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">input&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #DD0000">"Type&nbsp;in&nbsp;some&nbsp;secret:&nbsp;"</span><span style="color: #0000BB;">);<br />print&nbsp;(</span><span style="color: #DD0000">"\r\nYou&nbsp;typed&nbsp;in:&nbsp;"</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">result</span><span style="color: #0000BB;">);<br /><br /></span><span style="color: #000000">?&gt;</span></code></pre>
<pre><code><span style="color: #000000"></span><span style="color: #0000BB;">&lt;?</span><span style="color: #000000">v1<br /><br /></span><span style="color: #008000">//&nbsp;Read&nbsp;file&nbsp;data&nbsp;from&nbsp;standard&nbsp;input<br />//&nbsp;Example:&nbsp;v1&nbsp;script.v1&nbsp;&lt;&nbsp;file.dat<br /></span><span style="color: #000000">fh&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">fopen&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #DD0000">"v1://stdin"</span><span style="color: #0000BB;">);<br />print&nbsp;(</span><span style="color: #DD0000">"Input&nbsp;size:&nbsp;"</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">filesize&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">fh</span><span style="color: #0000BB;">));<br /><br /></span><span style="color: #000000">pos&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">0</span><span style="color: #0000BB;">;<br />while&nbsp;(!</span><span style="color: #000000">feof&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">fh</span><span style="color: #0000BB;">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #000000">line&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">fgets&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">fh</span><span style="color: #0000BB;">);<br />&nbsp;&nbsp;&nbsp;&nbsp;print&nbsp;(</span><span style="color: #DD0000">"Pos&nbsp;"</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">pos</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">"\t:&nbsp;"</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">line</span><span style="color: #0000BB;">);<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #000000">pos</span><span style="color: #0000BB;">=</span><span style="color: #000000">ftell</span><span style="color: #0000BB;">(</span><span style="color: #000000">fh</span><span style="color: #0000BB;">);<br />}<br /><br /></span><span style="color: #000000">?&gt;</span></code></pre>
<pre><code><span style="color: #000000"></span><span style="color: #0000BB;">&lt;?</span><span style="color: #000000">v1<br /><br /></span><span style="color: #008000">//&nbsp;Read&nbsp;file&nbsp;line&nbsp;by&nbsp;line<br /></span><span style="color: #0000BB;">if&nbsp;(</span><span style="color: #000000">fh&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">fopen&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #DD0000">"myfile.txt"</span><span style="color: #0000BB;">))&nbsp;{<br />&nbsp;&nbsp;</span><span style="color: #000000">line&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #DD0000">""</span><span style="color: #0000BB;">;<br />&nbsp;&nbsp;while&nbsp;(</span><span style="color: #000000">freadln&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">fh</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">line</span><span style="color: #0000BB;">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #000000">tokens&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">explode&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #DD0000">";"</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">line</span><span style="color: #0000BB;">);<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #000000">print_r&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">tokens</span><span style="color: #0000BB;">);&nbsp;&nbsp;<br />&nbsp;&nbsp;}<br />&nbsp;&nbsp;</span><span style="color: #000000">fclose&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">fh</span><span style="color: #0000BB;">);<br />}<br /><br /></span><span style="color: #000000">?&gt;</span></code></pre>
<pre><code><span style="color: #000000"></span><span style="color: #0000BB;">&lt;?</span><span style="color: #000000">v1<br /><br /></span><span style="color: #008000">//&nbsp;Read&nbsp;a&nbsp;file&nbsp;in&nbsp;blocks&nbsp;(default&nbsp;block&nbsp;size&nbsp;is&nbsp;64&nbsp;KB)<br /></span><span style="color: #0000BB;">if&nbsp;(</span><span style="color: #000000">fh&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">fopen&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #DD0000">"myfile.bin"</span><span style="color: #0000BB;">))&nbsp;{<br />&nbsp;&nbsp;</span><span style="color: #000000">block&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #DD0000">""</span><span style="color: #0000BB;">;<br />&nbsp;&nbsp;while&nbsp;(</span><span style="color: #000000">bytesRead</span><span style="color: #0000BB;">=</span><span style="color: #000000">fread&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">fh</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">block</span><span style="color: #0000BB;">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #000000">printf&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #DD0000">"Block&nbsp;of&nbsp;%u&nbsp;bytes&nbsp;read"</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">bytesRead</span><span style="color: #0000BB;">);<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #008000">//&nbsp;Do&nbsp;something&nbsp;with&nbsp;the&nbsp;block<br />&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;...<br />&nbsp;&nbsp;</span><span style="color: #0000BB;">}<br />&nbsp;&nbsp;</span><span style="color: #000000">fclose&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">fh</span><span style="color: #0000BB;">);<br />}<br /><br /></span><span style="color: #000000">?&gt;</span></code></pre>
<pre><code><span style="color: #000000"></span><span style="color: #0000BB;">&lt;?</span><span style="color: #000000">v1<br /><br /></span><span style="color: #008000">//&nbsp;Create&nbsp;a&nbsp;file&nbsp;and&nbsp;write&nbsp;binary&nbsp;data<br /></span><span style="color: #0000BB;">if&nbsp;(</span><span style="color: #000000">fh&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">fopen&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #DD0000">"myfile.txt"</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">"w+"</span><span style="color: #0000BB;">))&nbsp;{<br />&nbsp;&nbsp;</span><span style="color: #000000">binary&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #DD0000">"\x56\x31\x20\x53\x63\x72\x69\x70\x74\0"</span><span style="color: #0000BB;">;&nbsp;</span><span style="color: #008000">//&nbsp;Binary&nbsp;representation&nbsp;of&nbsp;V1&nbsp;Script&nbsp;with&nbsp;zero&nbsp;byte<br />&nbsp;&nbsp;</span><span style="color: #000000">binary</span><span style="color: #0000BB;">.=</span><span style="color: #000000">binformat&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">42</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">4</span><span style="color: #0000BB;">);&nbsp;</span><span style="color: #008000">//&nbsp;Add&nbsp;42&nbsp;as&nbsp;64&nbsp;Bit&nbsp;binary&nbsp;number<br />&nbsp;&nbsp;</span><span style="color: #000000">binary</span><span style="color: #0000BB;">.=</span><span style="color: #000000">binformat&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">42</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">3</span><span style="color: #0000BB;">);&nbsp;</span><span style="color: #008000">//&nbsp;Add&nbsp;42&nbsp;as&nbsp;32&nbsp;Bit&nbsp;binary&nbsp;number<br />&nbsp;&nbsp;</span><span style="color: #000000">binary</span><span style="color: #0000BB;">.=</span><span style="color: #000000">binformat&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">42</span><span style="color: #0000BB;">);&nbsp;</span><span style="color: #008000">//&nbsp;Add&nbsp;42&nbsp;as&nbsp;binary&nbsp;number&nbsp;with&nbsp;system&nbsp;byte&nbsp;alignment&nbsp;(4&nbsp;on&nbsp;32&nbsp;Bit,&nbsp;8&nbsp;on&nbsp;64&nbsp;Bit&nbsp;versions&nbsp;of&nbsp;V1)<br />&nbsp;&nbsp;</span><span style="color: #000000">fwrite&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">fh</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">binary</span><span style="color: #0000BB;">);<br />&nbsp;&nbsp;</span><span style="color: #000000">fclose&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">fh</span><span style="color: #0000BB;">);<br />}<br /><br /></span><span style="color: #000000">?&gt;</span></code></pre>
<pre><code><span style="color: #000000"></span><span style="color: #0000BB;">&lt;?</span><span style="color: #000000">v1<br /><br /></span><span style="color: #008000">//&nbsp;Read&nbsp;a&nbsp;file&nbsp;from&nbsp;specific&nbsp;position<br /></span><span style="color: #0000BB;">if&nbsp;(</span><span style="color: #000000">fh&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">fopen&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #DD0000">"myfile.txt"</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">"r"</span><span style="color: #0000BB;">))&nbsp;{<br />&nbsp;&nbsp;</span><span style="color: #000000">fseek&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">fh</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">3</span><span style="color: #0000BB;">);&nbsp;</span><span style="color: #008000">//&nbsp;Set&nbsp;file&nbsp;pointer<br />&nbsp;&nbsp;</span><span style="color: #000000">c&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #DD0000">""</span><span style="color: #0000BB;">;<br />&nbsp;&nbsp;</span><span style="color: #000000">fread&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">fh</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">c</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">1</span><span style="color: #0000BB;">);&nbsp;&nbsp;</span><span style="color: #008000">//&nbsp;Read&nbsp;1&nbsp;Byte<br />&nbsp;&nbsp;</span><span style="color: #0000BB;">print&nbsp;(</span><span style="color: #000000">c</span><span style="color: #0000BB;">);&nbsp;<br />&nbsp;&nbsp;</span><span style="color: #000000">fclose&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">fh</span><span style="color: #0000BB;">);<br />}<br /><br /></span><span style="color: #000000">?&gt;</span></code></pre>
<p><a href="index.html">back to Home</a></p>
	</div>
	<footer>
		<p>V1 Version 0.96 - Documentation generated Tue, 05 Sep 2023 11:27</p>
	</footer>
	</body>
	</html>
	
	