
	<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
	<html xmlns="http://www.w3.org/1999/xhtml">
	
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />	
		<title>V1 Script - X11 Window</title>
		<link rel="stylesheet" type="text/css" href="css/style.css" />
	</head>
	
	<body>
	
	<div class="logo"><a href="index.html"><img src="images/v1_logo.png" alt="V1 Script"/></a></div>
	
	<div class="page_wrap">
	<h1>Example: X11 Window</h1>
<p>Demonstrates how to create a simple GUI window with libX11 <a href="native-function-call.html">native function calling</a> on X-Server.</p>
<pre><code><span style="color: #000000"></span><span style="color: #0000BB;">&lt;?</span><span style="color: #000000">v1<br /></span><span style="color: #008000">/*&nbsp;<br />&nbsp;&nbsp;Draw&nbsp;overlayed&nbsp;sinus&nbsp;curves&nbsp;on&nbsp;X11&nbsp;Window<br />*/<br /><br /></span><span style="color: #000000">error_reporting&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">0</span><span style="color: #0000BB;">);<br /><br />const&nbsp;</span><span style="color: #000000">WINDOW_WIDTH&nbsp;&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">800</span><span style="color: #0000BB;">;<br />const&nbsp;</span><span style="color: #000000">WINDOW_HEIGHT&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">600</span><span style="color: #0000BB;">;<br />const&nbsp;</span><span style="color: #000000">WINDOW_TITLE&nbsp;&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #DD0000">'V1&nbsp;Script&nbsp;-&nbsp;Simple&nbsp;X11&nbsp;Window'</span><span style="color: #0000BB;">;<br /><br /></span><span style="color: #000000">hDLLX11&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">dl&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #DD0000">'libX11'</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">true</span><span style="color: #0000BB;">);<br />if&nbsp;(!</span><span style="color: #000000">hDLLX11</span><span style="color: #0000BB;">)&nbsp;{<br />&nbsp;&nbsp;</span><span style="color: #008000">//&nbsp;Search&nbsp;for&nbsp;X11&nbsp;library<br />&nbsp;&nbsp;</span><span style="color: #000000">libList&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">explode&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #DD0000">"\n"</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">system&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #DD0000">'/usr/bin/find&nbsp;/usr/lib'</span><span style="color: #0000BB;">.(</span><span style="color: #000000">version</span><span style="color: #0000BB;">(</span><span style="color: #000000">3</span><span style="color: #0000BB;">)==</span><span style="color: #000000">1&nbsp;</span><span style="color: #0000BB;">?&nbsp;</span><span style="color: #DD0000">'64'&nbsp;</span><span style="color: #0000BB;">:&nbsp;</span><span style="color: #DD0000">''</span><span style="color: #0000BB;">).</span><span style="color: #DD0000">'&nbsp;-name&nbsp;"libX11*.so*"'</span><span style="color: #0000BB;">));<br />&nbsp;&nbsp;if&nbsp;(!empty&nbsp;(</span><span style="color: #000000">libList</span><span style="color: #0000BB;">[</span><span style="color: #000000">0</span><span style="color: #0000BB;">]))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #000000">hDLLX11&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">dl&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">libList</span><span style="color: #0000BB;">[</span><span style="color: #000000">0</span><span style="color: #0000BB;">],&nbsp;</span><span style="color: #000000">true</span><span style="color: #0000BB;">);<br />&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #000000">hDLLX11</span><span style="color: #0000BB;">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print&nbsp;(</span><span style="color: #DD0000">"Please&nbsp;replace&nbsp;for&nbsp;faster&nbsp;starting:&nbsp;dl&nbsp;('"</span><span style="color: #0000BB;">.</span><span style="color: #000000">libList</span><span style="color: #0000BB;">[</span><span style="color: #000000">0</span><span style="color: #0000BB;">].</span><span style="color: #DD0000">"',&nbsp;true);"</span><span style="color: #0000BB;">);<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;}<br />}<br /><br />if&nbsp;(!</span><span style="color: #000000">hDLLX11</span><span style="color: #0000BB;">)&nbsp;{<br />&nbsp;&nbsp;print&nbsp;(</span><span style="color: #DD0000">"libX11.so&nbsp;was&nbsp;not&nbsp;found&nbsp;on&nbsp;this&nbsp;system.\r\nTry:&nbsp;sudo&nbsp;apt-get&nbsp;install&nbsp;libx11-dev"</span><span style="color: #0000BB;">);<br />&nbsp;&nbsp;exit&nbsp;(</span><span style="color: #000000">1</span><span style="color: #0000BB;">);<br />}<br /><br />const&nbsp;</span><span style="color: #000000">PI&nbsp;&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">3.14159265359</span><span style="color: #0000BB;">;<br />const&nbsp;</span><span style="color: #000000">PI2&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">2</span><span style="color: #0000BB;">*</span><span style="color: #000000">PI</span><span style="color: #0000BB;">;<br /><br />function&nbsp;</span><span style="color: #000000">drawWindow&nbsp;</span><span style="color: #0000BB;">()&nbsp;<br />{<br />&nbsp;&nbsp;global&nbsp;</span><span style="color: #000000">hDLLX11</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">screen</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">display</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">window</span><span style="color: #0000BB;">,&nbsp;&nbsp;</span><span style="color: #000000">windowWidth</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">windowHeight</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">colors</span><span style="color: #0000BB;">;<br />&nbsp;&nbsp;</span><span style="color: #000000">gc&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">call&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">hDLLX11</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">'XDefaultGC'</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">'pi:p'</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">display</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">screen</span><span style="color: #0000BB;">);<br /><br />&nbsp;&nbsp;</span><span style="color: #008000">//&nbsp;Sinus&nbsp;frequencies&nbsp;to&nbsp;overlay<br />&nbsp;&nbsp;</span><span style="color: #000000">freqList&nbsp;</span><span style="color: #0000BB;">=&nbsp;[</span><span style="color: #000000">1</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">3</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">4.5</span><span style="color: #0000BB;">];<br /><br />&nbsp;&nbsp;</span><span style="color: #008000">//&nbsp;Clear&nbsp;window<br />&nbsp;&nbsp;</span><span style="color: #000000">call&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">hDLLX11</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">'XClearWindow'</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">'pp:i'</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">display</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">window</span><span style="color: #0000BB;">);&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;</span><span style="color: #008000">//&nbsp;call&nbsp;(hDLLX11,&nbsp;'XSetForeground',&nbsp;'ppi:i',&nbsp;display,&nbsp;gc,&nbsp;binparse&nbsp;(colors['white']));&nbsp;<br />&nbsp;&nbsp;//&nbsp;call&nbsp;(hDLLX11,&nbsp;'XFillRectangle',&nbsp;'pppiiii:i',&nbsp;display,&nbsp;window,&nbsp;gc,&nbsp;0,&nbsp;0,&nbsp;windowWidth,&nbsp;windowHeight);<br /><br />&nbsp;&nbsp;//&nbsp;Draw&nbsp;legend<br />&nbsp;&nbsp;</span><span style="color: #000000">call&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">hDLLX11</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">'XSetForeground'</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">'ppi:i'</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">display</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">gc</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">binparse&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">colors</span><span style="color: #0000BB;">[</span><span style="color: #DD0000">'red'</span><span style="color: #0000BB;">]));&nbsp;&nbsp;<br />&nbsp;&nbsp;</span><span style="color: #000000">call&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">hDLLX11</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">'XFillRectangle'</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">'pppiiii:i'</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">display</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">window</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">gc</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">20</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">20</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">10</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">10</span><span style="color: #0000BB;">);&nbsp;&nbsp;&nbsp;<br /><br />&nbsp;&nbsp;</span><span style="color: #000000">msg&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #DD0000">''</span><span style="color: #0000BB;">;<br />&nbsp;&nbsp;foreach&nbsp;(</span><span style="color: #000000">freqList&nbsp;</span><span style="color: #0000BB;">as&nbsp;</span><span style="color: #000000">freq</span><span style="color: #0000BB;">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!empty&nbsp;(</span><span style="color: #000000">msg</span><span style="color: #0000BB;">))<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #000000">msg</span><span style="color: #0000BB;">.=</span><span style="color: #DD0000">'&nbsp;+&nbsp;'</span><span style="color: #0000BB;">;<br />&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #000000">freq</span><span style="color: #0000BB;">!=</span><span style="color: #000000">1</span><span style="color: #0000BB;">)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #000000">msg</span><span style="color: #0000BB;">.=&nbsp;</span><span style="color: #DD0000">'sin('</span><span style="color: #0000BB;">.</span><span style="color: #000000">freq</span><span style="color: #0000BB;">.</span><span style="color: #DD0000">'x)'</span><span style="color: #0000BB;">;<br />&nbsp;&nbsp;&nbsp;&nbsp;else<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #000000">msg</span><span style="color: #0000BB;">.=</span><span style="color: #DD0000">'sin(x)'</span><span style="color: #0000BB;">;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;}<br />&nbsp;&nbsp;if&nbsp;(</span><span style="color: #000000">count&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">freqList</span><span style="color: #0000BB;">))<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #000000">msg&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #DD0000">'('</span><span style="color: #0000BB;">.</span><span style="color: #000000">msg</span><span style="color: #0000BB;">.</span><span style="color: #DD0000">')&nbsp;/&nbsp;'</span><span style="color: #0000BB;">.</span><span style="color: #000000">count&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">freqList</span><span style="color: #0000BB;">);<br /><br />&nbsp;&nbsp;</span><span style="color: #000000">call&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">hDLLX11</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">'XSetForeground'</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">'ppi:i'</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">display</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">gc</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">binparse&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">colors</span><span style="color: #0000BB;">[</span><span style="color: #DD0000">'blue'</span><span style="color: #0000BB;">]));<br />&nbsp;&nbsp;</span><span style="color: #000000">call&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">hDLLX11</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">'XDrawString'</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">'pppiisi:i'</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">display</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">window</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">gc</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">40</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">30</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">msg</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">strlen&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">msg</span><span style="color: #0000BB;">));<br /><br />&nbsp;&nbsp;</span><span style="color: #008000">//&nbsp;Draw&nbsp;axes&nbsp;<br />&nbsp;&nbsp;</span><span style="color: #000000">call&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">hDLLX11</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">'XSetForeground'</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">'ppi:i'</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">display</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">gc</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">binparse&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">colors</span><span style="color: #0000BB;">[</span><span style="color: #DD0000">'black'</span><span style="color: #0000BB;">]));&nbsp;&nbsp;<br /><br />&nbsp;&nbsp;</span><span style="color: #000000">offs&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">50</span><span style="color: #0000BB;">;&nbsp;&nbsp;<br />&nbsp;&nbsp;</span><span style="color: #000000">x&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">offs</span><span style="color: #0000BB;">;<br />&nbsp;&nbsp;</span><span style="color: #000000">y&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">offs</span><span style="color: #0000BB;">;&nbsp;&nbsp;<br /><br />&nbsp;&nbsp;</span><span style="color: #008000">//&nbsp;Y&nbsp;axis<br />&nbsp;&nbsp;</span><span style="color: #000000">call&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">hDLLX11</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">'XDrawLine'</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">'pppiiii:i'</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">display</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">window</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">gc</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">x</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">y</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">x</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">windowHeight</span><span style="color: #0000BB;">-</span><span style="color: #000000">offs</span><span style="color: #0000BB;">);&nbsp;<br /><br />&nbsp;&nbsp;</span><span style="color: #000000">windowHalf&nbsp;</span><span style="color: #0000BB;">=&nbsp;(</span><span style="color: #000000">windowHeight</span><span style="color: #0000BB;">-</span><span style="color: #000000">offs</span><span style="color: #0000BB;">*</span><span style="color: #000000">2</span><span style="color: #0000BB;">)/</span><span style="color: #000000">2</span><span style="color: #0000BB;">;<br />&nbsp;&nbsp;for&nbsp;(</span><span style="color: #000000">y2</span><span style="color: #0000BB;">=-</span><span style="color: #000000">1</span><span style="color: #0000BB;">;</span><span style="color: #000000">y2</span><span style="color: #0000BB;">&lt;=</span><span style="color: #000000">1</span><span style="color: #0000BB;">;</span><span style="color: #000000">y2</span><span style="color: #0000BB;">+=</span><span style="color: #000000">0.25</span><span style="color: #0000BB;">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #000000">msg&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">y2</span><span style="color: #0000BB;">;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #000000">y&nbsp;</span><span style="color: #0000BB;">=&nbsp;(</span><span style="color: #000000">windowHeight</span><span style="color: #0000BB;">/</span><span style="color: #000000">2</span><span style="color: #0000BB;">)-</span><span style="color: #000000">y2&nbsp;</span><span style="color: #0000BB;">*&nbsp;</span><span style="color: #000000">windowHalf</span><span style="color: #0000BB;">;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #000000">call&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">hDLLX11</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">'XDrawLine'</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">'pppiiii:i'</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">display</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">window</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">gc</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">x</span><span style="color: #0000BB;">-</span><span style="color: #000000">5</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">y</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">x</span><span style="color: #0000BB;">+</span><span style="color: #000000">5</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">y</span><span style="color: #0000BB;">);<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #000000">call&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">hDLLX11</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">'XDrawString'</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">'pppiisi:i'</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">display</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">window</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">gc</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">x</span><span style="color: #0000BB;">-</span><span style="color: #000000">40</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">y</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">msg</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">strlen&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">msg</span><span style="color: #0000BB;">));<br />&nbsp;&nbsp;}<br /><br />&nbsp;&nbsp;</span><span style="color: #008000">//&nbsp;X&nbsp;axis<br />&nbsp;&nbsp;</span><span style="color: #000000">x&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">offs</span><span style="color: #0000BB;">;<br />&nbsp;&nbsp;</span><span style="color: #000000">y&nbsp;</span><span style="color: #0000BB;">=&nbsp;(</span><span style="color: #000000">windowHeight</span><span style="color: #0000BB;">/</span><span style="color: #000000">2</span><span style="color: #0000BB;">);<br />&nbsp;&nbsp;</span><span style="color: #000000">call&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">hDLLX11</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">'XDrawLine'</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">'pppiiii:i'</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">display</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">window</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">gc</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">x</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">y</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">windowWidth</span><span style="color: #0000BB;">-</span><span style="color: #000000">offs</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">y</span><span style="color: #0000BB;">);&nbsp;<br /><br />&nbsp;&nbsp;for&nbsp;(</span><span style="color: #000000">x2</span><span style="color: #0000BB;">=</span><span style="color: #000000">0.25</span><span style="color: #0000BB;">;</span><span style="color: #000000">x2</span><span style="color: #0000BB;">&lt;=</span><span style="color: #000000">1</span><span style="color: #0000BB;">;</span><span style="color: #000000">x2</span><span style="color: #0000BB;">+=</span><span style="color: #000000">0.25</span><span style="color: #0000BB;">)&nbsp;<br />&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #000000">msg&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">x2</span><span style="color: #0000BB;">;<br />&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #000000">x2</span><span style="color: #0000BB;">==</span><span style="color: #000000">0.25</span><span style="color: #0000BB;">)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #000000">msg&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #DD0000">'pi/2'</span><span style="color: #0000BB;">;<br />&nbsp;&nbsp;&nbsp;&nbsp;else<br />&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #000000">x2</span><span style="color: #0000BB;">==</span><span style="color: #000000">0.5</span><span style="color: #0000BB;">)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #000000">msg&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #DD0000">'pi'</span><span style="color: #0000BB;">;<br />&nbsp;&nbsp;&nbsp;&nbsp;else<br />&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #000000">x2</span><span style="color: #0000BB;">==</span><span style="color: #000000">0.75</span><span style="color: #0000BB;">)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #000000">msg&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #DD0000">'3pi/2'</span><span style="color: #0000BB;">;<br />&nbsp;&nbsp;&nbsp;&nbsp;else<br />&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #000000">x2</span><span style="color: #0000BB;">==</span><span style="color: #000000">1</span><span style="color: #0000BB;">)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #000000">msg&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #DD0000">'2pi'</span><span style="color: #0000BB;">;<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #000000">x&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">offs&nbsp;</span><span style="color: #0000BB;">+&nbsp;(</span><span style="color: #000000">windowWidth</span><span style="color: #0000BB;">-&nbsp;(</span><span style="color: #000000">offs</span><span style="color: #0000BB;">*</span><span style="color: #000000">2</span><span style="color: #0000BB;">))&nbsp;*&nbsp;</span><span style="color: #000000">x2</span><span style="color: #0000BB;">;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #000000">call&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">hDLLX11</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">'XDrawLine'</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">'pppiiii:i'</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">display</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">window</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">gc</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">x</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">y</span><span style="color: #0000BB;">-</span><span style="color: #000000">5</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">x</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">y</span><span style="color: #0000BB;">+</span><span style="color: #000000">5</span><span style="color: #0000BB;">);<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #000000">call&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">hDLLX11</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">'XDrawString'</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">'pppiisi:i'</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">display</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">window</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">gc</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">x</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">y</span><span style="color: #0000BB;">+</span><span style="color: #000000">20</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">msg</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">strlen&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">msg</span><span style="color: #0000BB;">));<br />&nbsp;&nbsp;}<br /><br />&nbsp;&nbsp;</span><span style="color: #008000">//&nbsp;Plot&nbsp;overlayed&nbsp;frequencies<br />&nbsp;&nbsp;</span><span style="color: #000000">call&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">hDLLX11</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">'XSetForeground'</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">'ppi:i'</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">display</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">gc</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">binparse&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">colors</span><span style="color: #0000BB;">[</span><span style="color: #DD0000">'red'</span><span style="color: #0000BB;">]));&nbsp;&nbsp;<br /><br />&nbsp;&nbsp;</span><span style="color: #000000">Fs&nbsp;</span><span style="color: #0000BB;">=&nbsp;(</span><span style="color: #000000">windowWidth</span><span style="color: #0000BB;">-</span><span style="color: #000000">offs</span><span style="color: #0000BB;">*</span><span style="color: #000000">2</span><span style="color: #0000BB;">)/</span><span style="color: #000000">4</span><span style="color: #0000BB;">;<br />&nbsp;&nbsp;</span><span style="color: #000000">T&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">1&nbsp;</span><span style="color: #0000BB;">/&nbsp;</span><span style="color: #000000">Fs</span><span style="color: #0000BB;">;<br />&nbsp;&nbsp;</span><span style="color: #000000">L&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">Fs</span><span style="color: #0000BB;">;<br />&nbsp;&nbsp;</span><span style="color: #000000">t&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">0</span><span style="color: #0000BB;">;<br />&nbsp;&nbsp;</span><span style="color: #000000">x&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">offs</span><span style="color: #0000BB;">;<br />&nbsp;&nbsp;</span><span style="color: #000000">xOld&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">yOld&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">0</span><span style="color: #0000BB;">;<br /><br />&nbsp;&nbsp;for&nbsp;(</span><span style="color: #000000">i</span><span style="color: #0000BB;">=</span><span style="color: #000000">0</span><span style="color: #0000BB;">;</span><span style="color: #000000">i</span><span style="color: #0000BB;">&lt;=</span><span style="color: #000000">L</span><span style="color: #0000BB;">;</span><span style="color: #000000">i</span><span style="color: #0000BB;">++)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #000000">v&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">0</span><span style="color: #0000BB;">;<br />&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(</span><span style="color: #000000">freqList&nbsp;</span><span style="color: #0000BB;">as&nbsp;</span><span style="color: #000000">freq</span><span style="color: #0000BB;">)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #000000">v</span><span style="color: #0000BB;">+=</span><span style="color: #000000">sin</span><span style="color: #0000BB;">(</span><span style="color: #000000">PI2</span><span style="color: #0000BB;">*</span><span style="color: #000000">freq</span><span style="color: #0000BB;">*</span><span style="color: #000000">t</span><span style="color: #0000BB;">);<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #000000">v</span><span style="color: #0000BB;">/=</span><span style="color: #000000">count</span><span style="color: #0000BB;">(</span><span style="color: #000000">freqList</span><span style="color: #0000BB;">);<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #000000">y&nbsp;</span><span style="color: #0000BB;">=&nbsp;(</span><span style="color: #000000">windowHeight</span><span style="color: #0000BB;">/</span><span style="color: #000000">2</span><span style="color: #0000BB;">)&nbsp;-&nbsp;&nbsp;</span><span style="color: #000000">v&nbsp;</span><span style="color: #0000BB;">*&nbsp;((</span><span style="color: #000000">windowHeight</span><span style="color: #0000BB;">-</span><span style="color: #000000">offs</span><span style="color: #0000BB;">*</span><span style="color: #000000">2</span><span style="color: #0000BB;">)/</span><span style="color: #000000">2</span><span style="color: #0000BB;">);<br />&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #000000">i</span><span style="color: #0000BB;">&gt;</span><span style="color: #000000">0</span><span style="color: #0000BB;">)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #000000">call&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">hDLLX11</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">'XDrawLine'</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">'pppiiii:i'</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">display</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">window</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">gc</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">xOld</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">yOld</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">x</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">y</span><span style="color: #0000BB;">);<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #000000">xOld&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">x</span><span style="color: #0000BB;">;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #000000">yOld&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">y</span><span style="color: #0000BB;">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #000000">t</span><span style="color: #0000BB;">+=</span><span style="color: #000000">T</span><span style="color: #0000BB;">;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #000000">x</span><span style="color: #0000BB;">+=</span><span style="color: #000000">4</span><span style="color: #0000BB;">;<br />&nbsp;&nbsp;}<br />&nbsp;&nbsp;</span><span style="color: #000000">call&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">hDLLX11</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">'XFlush'</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">'p:i'</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">display</span><span style="color: #0000BB;">);<br /><br />}<br /><br /></span><span style="color: #008000">//&nbsp;Open&nbsp;default&nbsp;display<br /></span><span style="color: #000000">display&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">call&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">hDLLX11</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">'XOpenDisplay'</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">'p:p'</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">null</span><span style="color: #0000BB;">);<br />if&nbsp;(!</span><span style="color: #000000">display</span><span style="color: #0000BB;">)&nbsp;{<br />&nbsp;&nbsp;print&nbsp;(</span><span style="color: #DD0000">'Cannot&nbsp;open&nbsp;default&nbsp;display.'</span><span style="color: #0000BB;">);<br />}<br /><br /></span><span style="color: #000000">screen&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">call&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">hDLLX11</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">'XDefaultScreen'</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">"p:i"</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">display</span><span style="color: #0000BB;">);<br /></span><span style="color: #000000">displayWidth&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">call&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">hDLLX11</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">'XDisplayWidth'</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">'pi:i'</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">display</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">screen</span><span style="color: #0000BB;">);<br /></span><span style="color: #000000">displayHeight&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">call&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">hDLLX11</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">'XDisplayHeight'</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">'pi:i'</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">display</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">screen</span><span style="color: #0000BB;">);<br /></span><span style="color: #000000">rootWindow&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">call&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">hDLLX11</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">'XDefaultRootWindow'</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">'pi:p'</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">display</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">screen</span><span style="color: #0000BB;">);<br /></span><span style="color: #000000">blackPixel&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">call&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">hDLLX11</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">'XBlackPixel'</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">'pi:p'</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">display</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">screen</span><span style="color: #0000BB;">);<br /></span><span style="color: #000000">whitePixel&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">call&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">hDLLX11</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">'XWhitePixel'</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">'pi:p'</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">display</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">screen</span><span style="color: #0000BB;">);<br /><br /></span><span style="color: #008000">//&nbsp;Create&nbsp;simple&nbsp;window<br /></span><span style="color: #000000">window&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">call&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">hDLLX11</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">'XCreateSimpleWindow'</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">'ppiiiiiii:p'</span><span style="color: #0000BB;">,&nbsp;<br />&nbsp;&nbsp;</span><span style="color: #000000">display</span><span style="color: #0000BB;">,&nbsp;<br />&nbsp;&nbsp;</span><span style="color: #000000">rootWindow</span><span style="color: #0000BB;">,&nbsp;<br />&nbsp;&nbsp;(</span><span style="color: #000000">displayWidth</span><span style="color: #0000BB;">-</span><span style="color: #000000">WINDOW_WIDTH</span><span style="color: #0000BB;">)/</span><span style="color: #000000">2</span><span style="color: #0000BB;">,&nbsp;<br />&nbsp;&nbsp;(</span><span style="color: #000000">displayHeight</span><span style="color: #0000BB;">-</span><span style="color: #000000">WINDOW_HEIGHT</span><span style="color: #0000BB;">)/</span><span style="color: #000000">2</span><span style="color: #0000BB;">,&nbsp;<br />&nbsp;&nbsp;</span><span style="color: #000000">WINDOW_WIDTH</span><span style="color: #0000BB;">,&nbsp;<br />&nbsp;&nbsp;</span><span style="color: #000000">WINDOW_HEIGHT</span><span style="color: #0000BB;">,&nbsp;<br />&nbsp;&nbsp;</span><span style="color: #000000">1</span><span style="color: #0000BB;">,&nbsp;<br />&nbsp;&nbsp;</span><span style="color: #000000">blackPixel</span><span style="color: #0000BB;">,&nbsp;<br />&nbsp;&nbsp;</span><span style="color: #000000">whitePixel</span><span style="color: #0000BB;">);<br /><br /></span><span style="color: #008000">//&nbsp;Set&nbsp;window&nbsp;title<br /></span><span style="color: #000000">call&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">hDLLX11</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">'XStoreName'</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">'pps:i'</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">display</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">window</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">WINDOW_TITLE</span><span style="color: #0000BB;">);<br /><br /></span><span style="color: #008000">//&nbsp;Set&nbsp;window&nbsp;position&nbsp;and&nbsp;center&nbsp;to&nbsp;display<br />//&nbsp;This&nbsp;is&nbsp;old&nbsp;stuff,&nbsp;you&nbsp;can&nbsp;use&nbsp;XResizeWindow&nbsp;and&nbsp;XMoveWindow&nbsp;after&nbsp;XMapWindow&nbsp;(see&nbsp;below)<br /></span><span style="color: #000000">size&nbsp;</span><span style="color: #0000BB;">=&nbsp;<br />&nbsp;&nbsp;</span><span style="color: #000000">binformat&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">1</span><span style="color: #0000BB;">&lt;&lt;</span><span style="color: #000000">2</span><span style="color: #0000BB;">|</span><span style="color: #000000">1</span><span style="color: #0000BB;">&lt;&lt;</span><span style="color: #000000">3</span><span style="color: #0000BB;">).<br />&nbsp;&nbsp;</span><span style="color: #000000">binformat&nbsp;</span><span style="color: #0000BB;">((</span><span style="color: #000000">displayWidth</span><span style="color: #0000BB;">-</span><span style="color: #000000">WINDOW_WIDTH</span><span style="color: #0000BB;">)/</span><span style="color: #000000">2</span><span style="color: #0000BB;">).&nbsp;</span><span style="color: #008000">//&nbsp;x<br />&nbsp;&nbsp;</span><span style="color: #000000">binformat&nbsp;</span><span style="color: #0000BB;">((</span><span style="color: #000000">displayHeight</span><span style="color: #0000BB;">-</span><span style="color: #000000">WINDOW_HEIGHT</span><span style="color: #0000BB;">)/</span><span style="color: #000000">2</span><span style="color: #0000BB;">).&nbsp;</span><span style="color: #008000">//&nbsp;y<br />&nbsp;&nbsp;</span><span style="color: #000000">binformat&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">WINDOW_WIDTH</span><span style="color: #0000BB;">).&nbsp;</span><span style="color: #008000">//&nbsp;width<br />&nbsp;&nbsp;</span><span style="color: #000000">binformat&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">WINDOW_HEIGHT</span><span style="color: #0000BB;">);&nbsp;</span><span style="color: #008000">//&nbsp;height<br /></span><span style="color: #000000">call&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">hDLLX11</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">'XSetNormalHints'</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">'ppr:i'</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">display</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">window</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">size</span><span style="color: #0000BB;">);<br /><br /></span><span style="color: #008000">//&nbsp;Select&nbsp;kind&nbsp;of&nbsp;events&nbsp;we&nbsp;are&nbsp;interested&nbsp;in<br /></span><span style="color: #000000">call&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">hDLLX11</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">'XSelectInput'</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">'ppi:i'</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">display</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">window</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">1</span><span style="color: #0000BB;">&lt;&lt;</span><span style="color: #000000">15</span><span style="color: #0000BB;">|</span><span style="color: #000000">1</span><span style="color: #0000BB;">|</span><span style="color: #000000">1</span><span style="color: #0000BB;">&lt;&lt;</span><span style="color: #000000">17</span><span style="color: #0000BB;">);&nbsp;</span><span style="color: #008000">//&nbsp;1&lt;&lt;15&nbsp;=&nbsp;ExposureMask&nbsp;|&nbsp;1&nbsp;=&nbsp;KeyPressMask&nbsp;|&nbsp;1&lt;&lt;17&nbsp;=&nbsp;StructureNotifyMask<br /></span><span style="color: #000000">wm_delete_window&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">call&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">hDLLX11</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">'XInternAtom'</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">'psi:p'</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">display</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">'WM_DELETE_WINDOW'</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">false</span><span style="color: #0000BB;">);<br /></span><span style="color: #000000">wm_delete_window&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">binformat&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">wm_delete_window</span><span style="color: #0000BB;">);<br /></span><span style="color: #000000">call&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">hDLLX11</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">'XSetWMProtocols'</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">'ppri:i'</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">display</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">window</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">wm_delete_window</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">1</span><span style="color: #0000BB;">);<br /><br /></span><span style="color: #008000">//&nbsp;Map&nbsp;(show)&nbsp;the&nbsp;window&nbsp;<br /></span><span style="color: #000000">call&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">hDLLX11</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">'XMapWindow'</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">'pp:i'</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">display</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">window</span><span style="color: #0000BB;">);<br /><br /></span><span style="color: #008000">//&nbsp;Center&nbsp;the&nbsp;window<br />//&nbsp;call&nbsp;(hDLLX11,&nbsp;'XResizeWindow',&nbsp;'ppii:i',&nbsp;display,&nbsp;window,&nbsp;WINDOW_WIDTH,&nbsp;WINDOW_HEIGHT);<br />//&nbsp;call&nbsp;(hDLLX11,&nbsp;'XMoveResizeWindow',&nbsp;'ppiiii:i',&nbsp;display,&nbsp;window,&nbsp;(displayWidth-WINDOW_WIDTH)/2,&nbsp;(displayHeight-WINDOW_HEIGHT)/2,&nbsp;WINDOW_WIDTH,&nbsp;WINDOW_HEIGHT);<br />//&nbsp;call&nbsp;(hDLLX11,&nbsp;'XMoveWindow',&nbsp;'ppii:i',&nbsp;display,&nbsp;window,&nbsp;(displayWidth-WINDOW_WIDTH)/2,&nbsp;(displayHeight-WINDOW_HEIGHT)/2);<br /><br />//&nbsp;Create&nbsp;colors<br /></span><span style="color: #000000">colormap&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">call&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">hDLLX11</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">'XDefaultColormap'</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">'pp:i'</span><span style="color: #0000BB;">,</span><span style="color: #000000">display</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">screen</span><span style="color: #0000BB;">);<br /></span><span style="color: #000000">colors&nbsp;</span><span style="color: #0000BB;">=&nbsp;array&nbsp;();<br /></span><span style="color: #000000">colorNames&nbsp;</span><span style="color: #0000BB;">=&nbsp;array&nbsp;(</span><span style="color: #DD0000">'red'</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">'green'</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">'blue'</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">'brown'</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">'black'</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">'yellow'</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">'white'</span><span style="color: #0000BB;">);<br />foreach&nbsp;(</span><span style="color: #000000">colorNames&nbsp;</span><span style="color: #0000BB;">as&nbsp;</span><span style="color: #000000">colorName</span><span style="color: #0000BB;">)&nbsp;{<br />&nbsp;&nbsp;</span><span style="color: #000000">colors</span><span style="color: #0000BB;">[</span><span style="color: #000000">colorName</span><span style="color: #0000BB;">]&nbsp;=&nbsp;</span><span style="color: #DD0000">''</span><span style="color: #0000BB;">;<br />&nbsp;&nbsp;</span><span style="color: #000000">ret&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">resize&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">colors</span><span style="color: #0000BB;">[</span><span style="color: #000000">colorName</span><span style="color: #0000BB;">],&nbsp;</span><span style="color: #000000">16</span><span style="color: #0000BB;">);&nbsp;</span><span style="color: #008000">//&nbsp;16&nbsp;bytes&nbsp;is&nbsp;enough&nbsp;buffer&nbsp;size&nbsp;for&nbsp;XColor&nbsp;struct<br />&nbsp;&nbsp;</span><span style="color: #000000">call&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">hDLLX11</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">'XAllocNamedColor'</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">'ppsrr:i'</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">display</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">colormap</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">colorName</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">colors</span><span style="color: #0000BB;">[</span><span style="color: #000000">colorName</span><span style="color: #0000BB;">],&nbsp;</span><span style="color: #000000">colors</span><span style="color: #0000BB;">[</span><span style="color: #000000">colorName</span><span style="color: #0000BB;">]);<br />}<br /><br /></span><span style="color: #008000">//&nbsp;Event&nbsp;loop<br /></span><span style="color: #000000">event&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">null</span><span style="color: #0000BB;">;<br /></span><span style="color: #000000">resize&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">event</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">256</span><span style="color: #0000BB;">);&nbsp;</span><span style="color: #008000">//&nbsp;256&nbsp;bytes&nbsp;is&nbsp;enough&nbsp;buffer&nbsp;size&nbsp;for&nbsp;XEvent&nbsp;struct<br /><br /></span><span style="color: #000000">fClose&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">false</span><span style="color: #0000BB;">;<br />while&nbsp;(!</span><span style="color: #000000">fClose</span><span style="color: #0000BB;">)<br />{<br />&nbsp;&nbsp;</span><span style="color: #000000">call&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">hDLLX11</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">'XNextEvent'</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">'pr:i'</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">display</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">event</span><span style="color: #0000BB;">);&nbsp;&nbsp;<br /><br />&nbsp;&nbsp;</span><span style="color: #000000">msgId&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">binparse&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">event</span><span style="color: #0000BB;">,</span><span style="color: #000000">3</span><span style="color: #0000BB;">);<br />&nbsp;&nbsp;switch&nbsp;(</span><span style="color: #000000">msgId</span><span style="color: #0000BB;">)&nbsp;<br />&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;</span><span style="color: #000000">12</span><span style="color: #0000BB;">:&nbsp;&nbsp;</span><span style="color: #008000">//&nbsp;12&nbsp;=&nbsp;Expose<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Draw&nbsp;or&nbsp;redraw&nbsp;the&nbsp;window<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #000000">drawWindow&nbsp;</span><span style="color: #0000BB;">();<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;</span><span style="color: #000000">33</span><span style="color: #0000BB;">:&nbsp;</span><span style="color: #008000">//&nbsp;33&nbsp;=&nbsp;ClientMessage&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Window&nbsp;messages<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB;">if&nbsp;(</span><span style="color: #000000">binparse&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">event</span><span style="color: #0000BB;">,</span><span style="color: #000000">3</span><span style="color: #0000BB;">,</span><span style="color: #000000">_ALIGN</span><span style="color: #0000BB;">==</span><span style="color: #000000">4&nbsp;</span><span style="color: #0000BB;">?&nbsp;</span><span style="color: #000000">28&nbsp;</span><span style="color: #0000BB;">:&nbsp;</span><span style="color: #000000">56</span><span style="color: #0000BB;">)==</span><span style="color: #000000">binparse&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">wm_delete_window</span><span style="color: #0000BB;">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #000000">fClose&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">true</span><span style="color: #0000BB;">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;</span><span style="color: #000000">22</span><span style="color: #0000BB;">:&nbsp;</span><span style="color: #008000">//&nbsp;22&nbsp;=&nbsp;ConfigureNotify&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Get&nbsp;window&nbsp;size<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #000000">windowWidth&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">binparse&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">event</span><span style="color: #0000BB;">,</span><span style="color: #000000">3</span><span style="color: #0000BB;">,</span><span style="color: #000000">_ALIGN</span><span style="color: #0000BB;">==</span><span style="color: #000000">4&nbsp;</span><span style="color: #0000BB;">?&nbsp;</span><span style="color: #000000">32&nbsp;</span><span style="color: #0000BB;">:&nbsp;</span><span style="color: #000000">56</span><span style="color: #0000BB;">);&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #000000">windowHeight&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">binparse&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">event</span><span style="color: #0000BB;">,</span><span style="color: #000000">3</span><span style="color: #0000BB;">,</span><span style="color: #000000">_ALIGN</span><span style="color: #0000BB;">==</span><span style="color: #000000">4&nbsp;</span><span style="color: #0000BB;">?&nbsp;</span><span style="color: #000000">36&nbsp;</span><span style="color: #0000BB;">:&nbsp;</span><span style="color: #000000">60</span><span style="color: #0000BB;">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;</span><span style="color: #000000">2</span><span style="color: #0000BB;">:&nbsp;</span><span style="color: #008000">//&nbsp;2&nbsp;=&nbsp;KeyPress<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB;">break;<br />&nbsp;&nbsp;}<br />}<br /><br /></span><span style="color: #008000">//&nbsp;Close&nbsp;connection&nbsp;to&nbsp;server<br /></span><span style="color: #000000">call&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">hDLLX11</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">'XCloseDisplay'</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">'p:i'</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">display</span><span style="color: #0000BB;">);<br /><br /></span><span style="color: #000000">?&gt;</span></code></pre>
<p><a href="index.html">back to Home</a></p>
	</div>
	<footer>
		<p>V1 Version 0.96 - Documentation generated Sun, 27 Aug 2023 15:40</p>
	</footer>
	</body>
	</html>
	
	