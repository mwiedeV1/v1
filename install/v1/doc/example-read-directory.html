
	<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
	<html xmlns="http://www.w3.org/1999/xhtml">
	
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />	
		<title>V1 Script - Read directory</title>
		<link rel="stylesheet" type="text/css" href="css/style.css" />
	</head>
	
	<body>
	
	<div class="logo"><a href="index.html"><img src="images/v1_logo.png" alt="V1 Script"/></a></div>
	
	<div class="page_wrap">
	<h1>Example: Read directory</h1>
<p>The follwing <a href="file-functions.html">directory functions</a> can be used to read the content of a directory.</p>
<pre><code><span style="color: #000000"><br /></span><span style="color: #0000BB;">&lt;?</span><span style="color: #000000">v1<br /></span><span style="color: #008000">/*<br />&nbsp;&nbsp;&nbsp;&nbsp;Read&nbsp;the&nbsp;content&nbsp;of&nbsp;current&nbsp;directory&nbsp;and&nbsp;allow&nbsp;to&nbsp;navigate&nbsp;through&nbsp;directories.&nbsp;&nbsp;&nbsp;&nbsp;<br />*/<br /><br /></span><span style="color: #000000">error_reporting&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">0</span><span style="color: #0000BB;">);&nbsp;</span><span style="color: #008000">//&nbsp;1&nbsp;for&nbsp;all&nbsp;errors<br /><br /></span><span style="color: #000000">dir&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #DD0000">""</span><span style="color: #0000BB;">;<br /><br />do&nbsp;{<br /><br />&nbsp;&nbsp;</span><span style="color: #008000">//&nbsp;Change&nbsp;directory<br />&nbsp;&nbsp;</span><span style="color: #000000">chdir&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">dir</span><span style="color: #0000BB;">);<br />&nbsp;&nbsp;</span><span style="color: #000000">dir&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">getcwd&nbsp;</span><span style="color: #0000BB;">();&nbsp;</span><span style="color: #008000">//&nbsp;Current&nbsp;directory<br /><br />&nbsp;&nbsp;</span><span style="color: #000000">dh&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">opendir&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">dir</span><span style="color: #0000BB;">);<br />&nbsp;&nbsp;if&nbsp;(!</span><span style="color: #000000">dh</span><span style="color: #0000BB;">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;print&nbsp;(</span><span style="color: #DD0000">"Cannot&nbsp;open&nbsp;directory."</span><span style="color: #0000BB;">);<br />&nbsp;&nbsp;}<br />&nbsp;&nbsp;else&nbsp;{<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #000000">fileList&nbsp;</span><span style="color: #0000BB;">=&nbsp;array&nbsp;();<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #008000">//&nbsp;Get&nbsp;list&nbsp;of&nbsp;files&nbsp;/&nbsp;sub&nbsp;directories<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB;">while&nbsp;((</span><span style="color: #000000">dirEntry&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">readdir&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">dh</span><span style="color: #0000BB;">))!==</span><span style="color: #000000">false</span><span style="color: #0000BB;">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #000000">array_push&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">fileList</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">dirEntry</span><span style="color: #0000BB;">);<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #000000">closedir&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">dh</span><span style="color: #0000BB;">);<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #008000">//&nbsp;Show&nbsp;info<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB;">print&nbsp;(</span><span style="color: #DD0000">"\r\n"</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">dir</span><span style="color: #0000BB;">.</span><span style="color: #DD0000">"&nbsp;"</span><span style="color: #0000BB;">.</span><span style="color: #000000">count</span><span style="color: #0000BB;">(</span><span style="color: #000000">fileList</span><span style="color: #0000BB;">).</span><span style="color: #DD0000">"&nbsp;entries"</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">"\r\n"</span><span style="color: #0000BB;">);<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #008000">//&nbsp;Sort&nbsp;the&nbsp;file&nbsp;list&nbsp;(optional)<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #000000">sort&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">fileList</span><span style="color: #0000BB;">);<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #008000">//&nbsp;Show&nbsp;the&nbsp;list<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB;">for&nbsp;(</span><span style="color: #000000">z</span><span style="color: #0000BB;">=</span><span style="color: #000000">0</span><span style="color: #0000BB;">;</span><span style="color: #000000">z</span><span style="color: #0000BB;">&lt;</span><span style="color: #000000">2</span><span style="color: #0000BB;">;</span><span style="color: #000000">z</span><span style="color: #0000BB;">++)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(</span><span style="color: #000000">fileList&nbsp;</span><span style="color: #0000BB;">as&nbsp;</span><span style="color: #000000">filename</span><span style="color: #0000BB;">)&nbsp;{<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #000000">fileTime&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">filemtime</span><span style="color: #0000BB;">(</span><span style="color: #000000">dir</span><span style="color: #0000BB;">.</span><span style="color: #DD0000">"/"</span><span style="color: #0000BB;">.</span><span style="color: #000000">filename</span><span style="color: #0000BB;">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #000000">is_dir&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">dir</span><span style="color: #0000BB;">.</span><span style="color: #DD0000">"/"</span><span style="color: #0000BB;">.</span><span style="color: #000000">filename</span><span style="color: #0000BB;">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #008000">//&nbsp;Show&nbsp;sub&nbsp;directories<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB;">if&nbsp;(</span><span style="color: #000000">z</span><span style="color: #0000BB;">&gt;</span><span style="color: #000000">0</span><span style="color: #0000BB;">)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;continue;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #000000">printf&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #DD0000">"%10s&nbsp;%12s&nbsp;%s"</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #DD0000">""</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">date&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #DD0000">"%M&nbsp;%d&nbsp;%H:%i"</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">fileTime</span><span style="color: #0000BB;">),&nbsp;</span><span style="color: #000000">filename</span><span style="color: #0000BB;">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #008000">//&nbsp;Show&nbsp;files<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB;">if&nbsp;(</span><span style="color: #000000">z</span><span style="color: #0000BB;">==</span><span style="color: #000000">0</span><span style="color: #0000BB;">)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;continue;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #000000">printf&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #DD0000">"%10s&nbsp;%12s&nbsp;%s"</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">filesize&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">dir</span><span style="color: #0000BB;">.</span><span style="color: #DD0000">"/"</span><span style="color: #0000BB;">.</span><span style="color: #000000">filename</span><span style="color: #0000BB;">),&nbsp;</span><span style="color: #000000">date&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #DD0000">"%M&nbsp;%d&nbsp;%H:%i"</span><span style="color: #0000BB;">,&nbsp;</span><span style="color: #000000">fileTime</span><span style="color: #0000BB;">),&nbsp;</span><span style="color: #000000">filename</span><span style="color: #0000BB;">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;}<br />&nbsp;&nbsp;do&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #000000">dirNew&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">input&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #DD0000">"\r\nChange&nbsp;directory:"</span><span style="color: #0000BB;">);<br />&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #000000">is_dir&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">dirNew</span><span style="color: #0000BB;">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #000000">dir&nbsp;</span><span style="color: #0000BB;">=&nbsp;</span><span style="color: #000000">dirNew</span><span style="color: #0000BB;">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;else<br />&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #000000">is_dir&nbsp;</span><span style="color: #0000BB;">(</span><span style="color: #000000">dir</span><span style="color: #0000BB;">.</span><span style="color: #DD0000">"/"</span><span style="color: #0000BB;">.</span><span style="color: #000000">dirNew</span><span style="color: #0000BB;">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #000000">dir</span><span style="color: #0000BB;">.=(</span><span style="color: #DD0000">"/"</span><span style="color: #0000BB;">.</span><span style="color: #000000">dirNew</span><span style="color: #0000BB;">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print&nbsp;(</span><span style="color: #DD0000">"No&nbsp;directory"</span><span style="color: #0000BB;">);<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;}&nbsp;while&nbsp;(</span><span style="color: #000000">true</span><span style="color: #0000BB;">);<br /><br />}&nbsp;while&nbsp;(</span><span style="color: #000000">true</span><span style="color: #0000BB;">);<br /><br /></span><span style="color: #000000">?&gt;</span></code></pre>
<p><a href="index.html">back to Home</a></p>
	</div>
	<footer>
		<p>V1 Version 0.96 - Documentation generated Mon, 11 Jan 2021 10:33</p>
	</footer>
	</body>
	</html>
	
	